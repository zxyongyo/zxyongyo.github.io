---
title: Gitå­¦ä¹ ä½¿ç”¨ç¬”è®°
categories: Git
tags:
  - Git
keywords: 'git,github'
description: 'Gitå­¦ä¹ å’Œä½¿ç”¨çš„ç¬”è®°,è®°å½•å­¦ä¹ å’Œä½¿ç”¨gité‡åˆ°çš„é—®é¢˜å’ŒæŠ€å·§'
cover: 'https://cdn.jsdelivr.net/gh/zxyongyo/pictures/blog/1664332581508.webp'
abbrlink: 4bae23a1
date: 2022-09-27 10:55:05
---

**æœ¬æ–‡è®°å½•æˆ‘å­¦ä¹ å’Œä½¿ç”¨  `git` çš„ç¬”è®°ï¼Œè®°å½•å­¦ä¹ å’Œä½¿ç”¨ `git` æ—¶é‡åˆ°çš„é—®é¢˜å’ŒæŠ€å·§ã€‚(æŒç»­æ›´æ–°...)**

### åˆ†æ”¯æ“ä½œ

- æ‹‰å–è¿œç¨‹æŒ‡å®šåˆ†æ”¯ `$ git clone -b branch_name git@github.com:xxx`

- æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯ `$ git branch -a`

- åˆ‡æ¢åˆ°æŒ‡å®šçš„è¿œç¨‹åˆ†æ”¯ `$ git switch -c branch_name origin/branch-name`

- åˆ é™¤è¿œç¨‹æŒ‡å®šåˆ†æ”¯ `$ git push origin -d [branch_name]`

### git stash å‚¨è—å½“å‰å·¥ä½œåŒº

- `git stash`å‘½ä»¤ç”¨äºå°†å½“å‰æœªæäº¤ï¼ˆå·¥ä½œåŒºå’Œæš‚å­˜åŒºï¼‰çš„æ”¹åŠ¨å‚¨è—èµ·æ¥ï¼Œç­‰å¤„ç†å®Œå…¶å®ƒå·¥ä½œä¹‹åå†æ¢å¤ã€‚

```bash
# æŸ¥çœ‹å½“å‰å·¥ä½œåŒº
$ git status
On branch dev
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        modified:   app.js

no changes added to commit (use "git add" and/or "git commit -a")
# å‚¨è—å½“å‰å·¥ä½œåŒº
$ git stash
Saved working directory and index state WIP on dev: e146062 edit app.js
# æŸ¥çœ‹ stash è®°å½•
$ git stash list
stash@{0}: WIP on dev: e146062 edit app.js
# æ­¤æ—¶å¯ä»¥åˆ‡æ¢åˆ†æ”¯æˆ–è¿›è¡Œå…¶ä»–å·¥ä½œ
# æ¢å¤æœ€è¿‘ä¸€æ¬¡çš„ stashï¼Œ å¹¶åˆ é™¤æœ¬æ¬¡ stash è®°å½•
$ git stash pop
On branch dev
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        modified:   app.js

no changes added to commit (use "git add" and/or "git commit -a")
Dropped refs/stash@{0} (771daab2d3e6c5adcff439e7856e89891b35b5f3)
```

- å¯ä»¥å¤šæ¬¡`stash`ï¼Œæ¢å¤çš„æ—¶å€™ä½¿ç”¨`git stash list`æŸ¥çœ‹ stash è®°å½•ï¼Œç„¶åæ¢å¤æŒ‡å®šçš„ stash

```bash
# æŸ¥çœ‹å‚¨è—è®°å½•
$ git stash list
stash@{0}: WIP on dev: e146062 edit app.js
stash@{1}: WIP on dev: e146062 edit app.js
# æ¢å¤ stash@{0}
$ git stash apply stash@{0}
On branch dev
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git restore <file>..." to discard changes in working directory)
        modified:   README.md

no changes added to commit (use "git add" and/or "git commit -a")
# åˆ é™¤ stash@{0} è¿™æ¡è®°å½•
$ git stash drop stash@{0}
Dropped stash@{0} (72bddc948a1fa80b9e84a072a6ab1f412c9f3b22)
# ä»¥ä¸Šä¸¤æ¡å‘½ä»¤ç­‰åŒäº git stash pop stash@{0}
```

- å¯ä»¥çœ‹åˆ°ä»¥ä¸Šä¸¤ä¸ªå‚¨è—è®°å½•çš„æ ‡è¯†ä¿¡æ¯å®Œå…¨ä¸€æ ·ï¼Œå®¹æ˜“åˆ†ä¸æ¸…æ¯æ¬¡å‚¨è—çš„ä»€ä¹ˆå†…å®¹ï¼Œåœ¨ä½¿ç”¨ stash æ—¶å¯ä»¥ç”¨`-m|--message`æ ‡è¯†æœ¬æ¬¡ stash

```bash
$ git stash -m "stash message"
```

- `git stash`é»˜è®¤ä¸ä¼šå‚¨è—æœªè·Ÿè¸ªï¼ˆuntrackedï¼‰çš„æ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨`-u|--include-untracked`å‚¨è—åŒ…æ‹¬æœªè·Ÿè¸ªçš„æ–‡ä»¶ï¼›æˆ–è€…ä½¿ç”¨`-a|--all`å‚¨è—åŒ…æ‹¬æœªè·Ÿè¸ªå’Œå¿½ç•¥ï¼ˆ.gitignoreä¸­æŒ‡å®šï¼‰çš„æ–‡ä»¶

```bash
# git stash -um "add index.js" åŒ…æ‹¬æœªè·Ÿè¸ªçš„æ–‡ä»¶
$ git stash --include-untracked --message "add index.js"
Saved working directory and index state On dev: add index.js
# æˆ–è€…
# git stash -am "add index.js" åŒ…æ‹¬æœªè·Ÿè¸ªå’Œå¿½ç•¥çš„æ–‡ä»¶
$ git stash --all --message "add index.js"
Saved working directory and index state On dev: add index.js
```

### git rebase å˜åŸº

ğŸ‘‰ [git rebase ç”¨æ³•è¯¦è§£ä¸å·¥ä½œåŸç†](../dfe0e190)

### åˆå¹¶å¤šä¸ªcommit

- `git rebase` å‘½ä»¤ç”¨æ¥åœ¨å¦ä¸€ä¸ªåˆ†æ”¯åŸºç¡€ä¹‹ä¸Šé‡æ–°åº”ç”¨æäº¤ï¼Œç”¨äºæŠŠä¸€ä¸ªåˆ†æ”¯çš„ä¿®æ”¹åˆå¹¶åˆ°å½“å‰åˆ†æ”¯ã€‚
- ä¹Ÿå¯ä»¥åˆ©ç”¨è¿™ä¸ªå‘½ä»¤æ¥åˆå¹¶å¤šä¸ªæŸä¸ªåˆ†æ”¯çš„å¤šæ¡ commitã€‚

ä¾‹å¦‚æˆ‘çš„ git å†å²æäº¤ä¸­æœ‰è¿™æ ·çš„ä¿¡æ¯ï¼š

```bash
$ git log --oneline
a9753cc (HEAD -> master) edit app.js
eb6604c edit app.js
8239289 edit app.js
2bb4ff1 create app.js
c81bd04 edit README.md
0a38a95 edit README.md
e87226d edit README.md
c30085a create README.md
```

å¯ä»¥çœ‹åˆ°æœ‰å¾ˆå¤š commit çš„ä¿¡æ¯éƒ½æ˜¯é‡å¤çš„ã€‚

è¿™æ—¶å°±å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤é‡æ–°ç¼–è¾‘ä»¥å¾€7æ¬¡çš„ commit å†å²ï¼š

```bash
# ä»HEADç‰ˆæœ¬å¼€å§‹å¾€è¿‡å»æ•°7ä¸ªç‰ˆæœ¬(åŒ…å«HEADç‰ˆæœ¬)
$ git rebase -i HEAD~7
# æŒ‡å®šç‰ˆæœ¬å·å‰çš„æ‰€æœ‰ç‰ˆæœ¬(ä¸åŒ…å«æ­¤ç‰ˆæœ¬)
$ git rebase -i c30085a
```

> `-iï¼ˆ--interactiveï¼‰`ï¼šå¼¹å‡ºäº¤äº’å¼çš„ç•Œé¢è¿›è¡Œç¼–è¾‘åˆå¹¶

è¾“å…¥å‘½ä»¤ï¼ŒæŒ‰ä¸‹å›è½¦åä¼šå¼¹å‡º vimï¼Œè®©ä½ ç¼–è¾‘

```bash
$ git rebase -i HEAD~7
pick e87226d edit README.md
pick 0a38a95 edit README.md
pick c81bd04 edit README.md
pick 2bb4ff1 create app.js
pick 8239289 edit app.js
pick eb6604c edit app.js
pick a9753cc edit app.js

# Rebase c30085a..a9753cc onto c30085a (7 commands)
#
# Commands:
# p, pick <commit> = æ­£å¸¸é€‰ä¸­
# r, reword <commit> = é€‰ä¸­ï¼Œå¹¶ä¸”ä¿®æ”¹æäº¤ä¿¡æ¯
# e, edit <commit> = é€‰ä¸­ï¼Œrebaseæ—¶ä¼šæš‚åœï¼Œå…è®¸ä½ ä¿®æ”¹è¿™ä¸ªcommit
# s, squash <commit> = é€‰ä¸­ï¼Œä¼šå°†å½“å‰commitä¸ä¸Šä¸€ä¸ªcommitåˆå¹¶ï¼Œä¿ç•™æ‰€æœ‰commitä¿¡æ¯
# f, fixup [-C | -c] <commit> = ä¸squashç›¸åŒï¼Œä½†ä¸ä¼šä¿å­˜å½“å‰commitçš„æäº¤ä¿¡æ¯, 
#                    unless -C is used, in which case
#                    keep only this commit's message; -c is same as -C but
#                    opens the editor
# x, exec <command> = æ‰§è¡Œå…¶ä»–shellå‘½ä»¤
# b, break = åœåœ¨è¿™é‡Œï¼Œå¯ä»¥ä½¿ç”¨'git rebase --continue'ç»§ç»­rebase
# d, drop <commit> = åˆ é™¤è¿™ä¸ªcommitï¼Œè¿™æ¬¡æäº¤çš„æ‰€æœ‰æ›´æ”¹ä¹Ÿä¼šä¸¢å¼ƒ
# l, label <label> = label current HEAD with a name
```

ç¼–è¾‘å¦‚ä¸‹ï¼Œç„¶å `:wq` ä¿å­˜é€€å‡º

```bash
# æŠŠ c81bd04 å’Œ 0a38a95 åˆå¹¶åˆ° e87226d,ä¸ä¿ç•™ 0a38a95 å’Œ c81bd04 çš„ commit message
pick e87226d edit README.md
f 0a38a95 edit README.md
f c81bd04 edit README.md
pick 2bb4ff1 create app.js
# æŠŠ a9753cc å’Œ eb6604c åˆå¹¶åˆ° 8239289,ä¿ç•™æ‰€æœ‰ commit message
pick 8239289 edit app.js
s eb6604c edit app.js
s a9753cc edit app.js

# ...
```

ç„¶ååˆä¼šå¼¹å‡ºä¸€ä¸ª vim è®©ç¼–è¾‘ commit messageï¼Œç¼–è¾‘å¦‚ä¸‹ï¼Œç„¶å `:wq` ä¿å­˜é€€å‡º

```bash
# This is a combination of 3 commits.
# This is the 1st commit message:
edit app.js
# This is the commit message #2:
add main fn
# This is the commit message #3:
update server port

# ...
```

è¿™æ—¶å†æŸ¥çœ‹åˆå¹¶åçš„ logï¼Œä¸€ä¸‹å°±ç®€æ´äº†å¥½å¤š

```bash
$ git log --oneline
714f406 (HEAD -> master) edit app.js
e17c8ac create app.js
949598c edit README.md
c30085a create README.md
```

**è§£å†³å†²çª**

- åœ¨ `git rebase` æ—¶å¯èƒ½ä¼šå‘ç”Ÿå†²çªï¼Œè¿™æ—¶å°±éœ€è¦å…ˆå»è§£å†³å†²çªã€‚
- è§£å†³å®Œå†²çªåå† `git add .`ï¼Œç„¶åç»§ç»­ rebase `git rebase --continue`
- å¦‚æœè¢«åˆå¹¶çš„ commitï¼Œåˆå¹¶å‰å·²ç»æ¨é€åˆ°äº†è¿œç¨‹åº“ï¼Œå¯èƒ½æ— æ³•æ­£å¸¸æ¨é€åˆ°è¿œç¨‹åº“ï¼Œå¯ä»¥ä½¿ç”¨ `--force`

```bash
# å¦‚æœæ˜¯å¤šäººåä½œå¼€å‘ä¸å»ºè®®ä½¿ç”¨
$ git push --force origin master
```

----

### ä¿®æ”¹ commit çš„ä¿¡æ¯

**ä¿®æ”¹ä¸Šä¸€æ¬¡æäº¤çš„ commit ä¿¡æ¯ï¼š**

```bash
$ git commit --amend --message="commit message"
```

**ä¿®æ”¹å†å²æäº¤çš„ commit ä¿¡æ¯**

```bash
$ git log --oneline
a2cf832 (HEAD -> master) edit app.js
8e5130d insert one line from app.js
4968028 delete one line from app.js
e17c8ac create app.js

# ä¿®æ”¹ 8e5130d å’Œ 4968028 çš„ commit message
$ git rebase -i HEAD~3 # æˆ–è€… git rebase -i e17c8ac

# æŠŠè¦ä¿®æ”¹çš„ commit å‰çš„ pick æ”¹ä¸º r æˆ– reword
r 4968028 delete one line from app.js
r 8e5130d insert one line from app.js
pick a2cf832 edit app.js

# :wq ä¿å­˜å¹¶é€€å‡ºï¼Œç„¶åä¾æ¬¡ä¿®æ”¹ commit messageï¼Œ:wq ä¿å­˜å¹¶é€€å‡º
$ git log --oneline
e146062 (HEAD -> master) edit app.js
c1fe1bf ä» app.js ä¸­æ–°å¢ä¸€è¡Œ
91ea1e8 ä» app.js ä¸­åˆ é™¤ä¸€è¡Œ
e17c8ac create app.js
# å°±ä¿®æ”¹æˆåŠŸäº†
```

### git tag æ ‡ç­¾

`git tag <tagName>` ç”¨äºåœ¨ç‰ˆæœ¬åº“ä¸­åˆ›å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œå®ƒå…¶å®å°±æ˜¯æŒ‡å‘æŸä¸ª commmit çš„æŒ‡é’ˆï¼Œæ‰“æ ‡ç­¾æ—¶çš„ç‰ˆæœ¬å¿«ç…§ï¼Œå¸¸è¢«ç”¨æ¥æ ‡è®°å‘å¸ƒèŠ‚ç‚¹ï¼ˆv1.0, v2.0 ...ï¼‰ã€‚

#### æŸ¥çœ‹æ ‡ç­¾

- æŸ¥çœ‹å·²æœ‰çš„æ ‡ç­¾ï¼Œè¾“å…¥ `git tag`ï¼ˆå¯å¸¦ä¸Šå¯é€‰çš„ `-l` æˆ– `--list` é€‰é¡¹ï¼‰ï¼š

  ```bash
  $ git tag
  v1.0
  v2.0
  ```

- ä¹Ÿå¯ä»¥æŒ‰ç…§ç‰¹å®šçš„æ¨¡å¼æŸ¥æ‰¾æ ‡ç­¾ï¼ˆæ­¤æ—¶å¿…é¡»æä¾› `-l` æˆ– `--list` é€‰é¡¹ï¼‰

  ```bash
  $ git tag -l "v1.8.5*"
  v1.8.5
  v1.8.5-rc0
  v1.8.5.1
  ```


#### åˆ›å»ºæ ‡ç­¾

- ä½¿ç”¨ `git tag <tagName>` å¯ä»¥åœ¨å½“å‰åˆ†æ”¯æœ€æ–° commit ä¸Šåˆ›å»ºä¸€ä¸ªæ ‡ç­¾ï¼š

  ```bash
  $ git tag v1.0
  ```

- åˆ›å»ºå¸¦æœ‰è¯´æ˜çš„æ ‡ç­¾ï¼Œä½¿ç”¨ `-a` æŒ‡å®šæ ‡ç­¾åï¼Œ`-m` æŒ‡å®šè¯´æ˜ä¿¡æ¯ï¼š

  ```bash
  $ git tag -a v1.2 -m "version 1.2"
  ```

- å¦‚æœæƒ³åœ¨è¿‡å»çš„æŸä¸ª commit ä¸Šæ‰“æ ‡ç­¾ï¼Œåªéœ€è¦æä¾› commit id å°±è¡Œäº†ï¼š

  ```bash
  $ git log --oneline
  7eb4a6a started write support
  9666e66 updated rakefile
  4f74ac2 commit the todo
  5317aa2 updated readme
  $ git tag -a v1.1 4f74ac2
  ```

#### æŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯

ä½¿ç”¨ `git show <tagName>` å¯ä»¥æŸ¥çœ‹æŸä¸ªæ ‡ç­¾çš„ä¿¡æ¯ï¼š

```bash
$ git show v1.2
tag v1.2
Tagger: zxyong <1203123788@qq.com>
Date:   Fri Mar 10 16:48:05 2023 +0800

version 1.2

commit 1133b14a0520ed88398fbece124063ea2c99245f (tag: v1.2)
Author: zxyong <1203123788@qq.com>
Date:   Fri Mar 10 16:38:36 2023 +0800

    changed the version number
```

#### æ¨é€æ ‡ç­¾

é»˜è®¤æƒ…å†µä¸‹ï¼Œ`git push` å‘½ä»¤å¹¶ä¸ä¼šæ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ä»“åº“ä¸Šã€‚åœ¨åˆ›å»ºå®Œæ ‡ç­¾åä½ å¿…é¡»æ˜¾å¼åœ°æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹åº“ã€‚

- ä½¿ç”¨ `git push <remote> <tagname>`ï¼š

  ```bash
  $ git push origin v1.5
  Counting objects: 14, done.
  Delta compression using up to 8 threads.
  Compressing objects: 100% (12/12), done.
  Writing objects: 100% (14/14), 2.05 KiB | 0 bytes/s, done.
  Total 14 (delta 3), reused 0 (delta 0)
  To git@github.com:schacon/simplegit.git
   * [new tag]         v1.5 -> v1.5
  ```

- å¦‚æœæƒ³è¦ä¸€æ¬¡æ€§æ¨é€æœ¬åœ°çš„æ‰€æœ‰æœªæ¨é€çš„æ ‡ç­¾ï¼Œä½¿ç”¨ `--tags` é€‰é¡¹ï¼š

  ```bash
  $ git push origin --tags
  Counting objects: 1, done.
  Writing objects: 100% (1/1), 160 bytes | 0 bytes/s, done.
  Total 1 (delta 0), reused 0 (delta 0)
  To git@github.com:schacon/simplegit.git
   * [new tag]         v1.4 -> v1.4
   * [new tag]         v1.4-lw -> v1.4-lw
  ```

#### åˆ é™¤æ ‡ç­¾

- åˆ é™¤æœ¬åœ°æ ‡ç­¾ï¼Œä½¿ç”¨ `git tag -d <tagname>`ï¼š

  ```bash
  $ git tag -d v1.4-lw
  Deleted tag 'v1.4-lw' (was e7d5add)
  ```

- åˆ é™¤è¿œç¨‹åº“æ ‡ç­¾ï¼š

  ```bash
  $ git push origin --delete v1.4
  # æˆ–è€… git push origin :refs/tags/v1.4
  ```

  

