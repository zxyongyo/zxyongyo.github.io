---
title: 70é“JavaScriptå¸¸è§é¢è¯•é¢˜
categories: JS
tags:
  - JS
  - å‰ç«¯
keywords: 'js,é¢è¯•é¢˜'
description: 70é“JavaScriptå¸¸è§é¢è¯•é¢˜
cover: 'https://cdn.jsdelivr.net/gh/zxyongyo/pictures/blog/202302161005641.webp'
abbrlink: 2944b23d
date: 2023-02-16 10:02:43
toc_number: false
copyright: false
---

## 1. `undefined` å’Œ `null` æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

åœ¨äº†è§£ `undefined` å’Œ `null`  çš„åŒºåˆ«å‰ï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä»–ä»¬çš„ç›¸ä¼¼ä¹‹å¤„ï¼š

- å®ƒä»¬åŒå±äº JavaScript çš„ **7ç§** [åŸå§‹æ•°æ®ç±»å‹](https://developer.mozilla.org/zh-CN/docs/Glossary/Primitive)ã€‚

  ```js
  let primitiveTypes = ['string', 'number', 'bigint', 'symbol', 'null', 'undefined', 'boolean'];
  ```

- åœ¨å¯¹å®ƒä»¬ä½¿ç”¨ `Boolean(value)` æˆ– `!!value` è½¬ä¸ºå¸ƒå°”å€¼æ—¶ï¼Œéƒ½ä¼šè¢«è½¬ä¸º `false`ã€‚

  ```js
  console.log(!!null); // false
  console.log(!!undefined); // false
  
  console.log(Boolean(null)); // false
  console.log(Boolean(undefined)); // false
  ```

ç„¶åæ¥çœ‹å®ƒä»¬çš„ä¸åŒä¹‹å¤„ï¼š

- `undefined` æ˜¯æœªåˆ†é…å€¼çš„å˜é‡çš„é»˜è®¤å€¼ï¼Œæˆ–æ˜¯ä¸€ä¸ªæ²¡æœ‰æ˜¾å¼è¿”å›å€¼çš„å‡½æ•°çš„è¿”å›å€¼ï¼Œåˆæˆ–æ˜¯ä¸€ä¸ªå¯¹è±¡ä¸­ä¸å­˜åœ¨çš„å±æ€§çš„å€¼ã€‚

  ```js
  let _thisIsUndefined;
  const doNothing = () => {};
  const obj = {
      a : "ay",
      b : "bee",
      c : "si"
  };
  
  console.log(_thisIsUndefined); // undefined
  console.log(doNothing()); // undefined
  console.log(obj["d"]); // undefined
  ```

- `null` è¡¨ç¤ºä¸€ä¸ªä¸å­˜åœ¨çš„å€¼æˆ–æ˜¯ä¸€ä¸ªç©ºå¯¹è±¡çš„å¼•ç”¨ã€‚

  ```js
  console.log(typeof null) // object
  ```

å½“æˆ‘ä»¬ä½¿ç”¨ `==` æ¯”è¾ƒ `undefined` å’Œ `null` æ—¶ä¼šå¾—åˆ° `true`ï¼Œå½“ä½¿ç”¨ `===` æ¯”è¾ƒæ—¶ä¼šå¾—åˆ° `false`ã€‚

```js
console.log(undefined ==  null) // true
console.log(undefined === null) // false
```

## 2. `&&` è¿ç®—ç¬¦çš„ä½œç”¨ï¼Ÿ

`&&` (é€»è¾‘ä¸) è¿ç®—ç¬¦å½“ä¸”ä»…å½“æ‰€æœ‰è¡¨è¾¾å¼éƒ½ä¸º `true` æ—¶è¿”å› `true` å¦åˆ™è¿”å› `false`ï¼›

å½“æ“ä½œå¯¹è±¡ä¸æ˜¯å¸ƒå°”å€¼æ—¶ï¼Œå®ƒä¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸º **å‡** çš„æ“ä½œå¯¹è±¡å¹¶è¿”å›å®ƒï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ä»»ä½•ä¸ºå‡çš„æ“ä½œå¯¹è±¡ï¼Œ**åˆ™è¿”å›æœ€åä¸€ä¸ª**ã€‚

```js
console.log(false && 1 && []); // false
console.log("abc" && true && 1); // 1
```

## 3. `||` è¿ç®—ç¬¦çš„ä½œç”¨ï¼Ÿ

`||`(é€»è¾‘æˆ–)è¿ç®—ç¬¦å½“ä¸”ä»…å½“æ‰€æœ‰è¡¨è¾¾å¼éƒ½ä¸º `false` æ—¶è¿”å› `false` å¦åˆ™è¿”å› `true`ï¼›

å½“æ“ä½œå¯¹è±¡ä¸æ˜¯å¸ƒå°”å€¼æ—¶ï¼Œå®ƒä¼šæ‰¾åˆ°ç¬¬ä¸€ä¸ªä¸º **çœŸ** çš„æ“ä½œå¯¹è±¡å¹¶è¿”å›å®ƒï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ä»»ä½•ä¸ºçœŸçš„æ“ä½œå¯¹è±¡ï¼Œ**åˆ™è¿”å›æœ€åä¸€ä¸ª**

```js
console.log(true || 1 || "abc"); // true
console.log(false || "" || 1); // 1
```

## 4. ç”¨ä¸€å…ƒåŠ è¿ç®—ç¬¦ï¼ˆ+ï¼‰æ˜¯å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—çš„æœ€å¿«æ–¹æ³•å—ï¼Ÿ

æ˜¯çš„ï¼Œæ ¹æ® [MDNæè¿° ](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/Unary_plus)ï¼Œ**ä¸€å…ƒåŠ ï¼ˆ+ï¼‰** è¿ç®—ç¬¦ä¼šåœ¨æ“ä½œå€¼ä¹‹å‰å°è¯•å°†å®ƒè½¬ä¸ºæ•°å­—ï¼Œå¦‚æœç›®æ ‡å·²ç»æ˜¯æ•°å­—å°±ä»€ä¹ˆä¹Ÿä¸åšã€‚

## 5. ä»€ä¹ˆæ˜¯ DOMï¼Ÿ

**DOM** ä»£è¡¨ **æ–‡æ¡£å¯¹è±¡æ¨¡å‹**ï¼ˆDocument Object Modelï¼‰ï¼Œæ˜¯ç”¨æ¥å‘ˆç°ä»¥åŠä¸ä»»ä½• HTML å’Œ XML æ–‡æ¡£äº¤äº’çš„ APIã€‚

å½“æµè§ˆå™¨ç¬¬ä¸€æ¬¡è¯»å–ï¼ˆè§£æï¼‰HTML æ—¶ï¼Œä¼šåŸºäºæˆ‘ä»¬çš„ HTMLæ–‡æ¡£ åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå°±æ˜¯ DOMï¼Œå®ƒæ˜¯è½½å…¥åˆ°æµè§ˆå™¨ä¸­çš„æ–‡æ¡£æ¨¡å‹ï¼Œä»¥èŠ‚ç‚¹æ ‘çš„å½¢å¼æ¥è¡¨ç°æ–‡æ¡£ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä»£è¡¨æ–‡æ¡£çš„æ„æˆéƒ¨åˆ†ï¼ˆå¦‚ï¼šé¡µé¢å…ƒç´ ã€å­—ç¬¦ä¸²ã€æˆ–æ³¨é‡Šç­‰ï¼‰ã€‚

å‡å¦‚æœ‰ä»¥ä¸‹ HTMLï¼š

```html
<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta http-equiv="X-UA-Compatible" content="ie=edge">
   <title>Document Object Model</title>
</head>

<body>
   <div>
      <p>
         <span></span>
      </p>
      <label></label>
      <input>
   </div>
</body>

</html>
```

ç­‰åŒçš„ DOM åº”è¯¥æ˜¯è¿™æ ·çš„ï¼š

![DOM tree](https://cdn.jsdelivr.net/gh/zxyongyo/pictures/blog/202302171032104.png)

`JavaScript` ä¸­çš„ `document` å¯¹è±¡ä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šæ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¥å¯ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•æ¥å®Œæˆé€‰ä¸­DOMå…ƒç´ æˆ–æ›´æ–°å…ƒç´ çš„å†…å®¹ç­‰æ“ä½œã€‚

## 6. ä»€ä¹ˆæ˜¯äº‹ä»¶ä¼ æ’­ï¼Ÿ

å½“äº‹ä»¶åœ¨ä¸€ä¸ªDOMå…ƒç´ ä¸Šè§¦å‘æ—¶ï¼Œè¿™ä¸ªäº‹ä»¶å¹¶ä¸åªåœ¨å½“å‰å…ƒç´ ä¸Šè§¦å‘ã€‚

å½“ä¸€ä¸ªäº‹ä»¶è¢«è§¦å‘åä¼šç»å†**ä¸‰ä¸ªé˜¶æ®µ**ï¼š

- **æ•è·é˜¶æ®µ**ï¼šäº‹ä»¶å¯¹è±¡ä» `window` å¼€å§‹ä¾æ¬¡å‘ä¸‹ä¼ é€’ï¼Œç›´åˆ°ç›®æ ‡çš„çˆ¶çº§å…ƒç´ ï¼Œä»å¤–å‘å†…æ•è·äº‹ä»¶å¯¹è±¡ï¼›
- **ç›®æ ‡é˜¶æ®µ**ï¼šåˆ°è¾¾ç›®æ ‡äº‹ä»¶ä½ç½®ï¼Œè§¦å‘äº‹ä»¶ï¼›
- **å†’æ³¡é˜¶æ®µ**ï¼šä»ç›®æ ‡çš„çˆ¶çº§å¼€å§‹ä¾æ¬¡å‘ä¸Šä¼ é€’ï¼Œç›´åˆ° `window` åœæ­¢ï¼Œä»å†…å‘å¤–å†’æ³¡äº‹ä»¶å¯¹è±¡ã€‚

![Event flow](https://cdn.jsdelivr.net/gh/zxyongyo/pictures/blog/20210428110115.jpg)

> **è¯¦ç»†è¯·æŸ¥çœ‹ [å½»åº•å¼„æ‡‚ js ä¸­äº‹ä»¶å†’æ³¡å’Œæ•è·ğŸˆ](/posts/81781fa3/)**

## 7. ä»€ä¹ˆæ˜¯äº‹ä»¶å†’æ³¡ï¼Ÿ

å½“äº‹ä»¶åœ¨ä¸€ä¸ªDOMå…ƒç´ ä¸Šè§¦å‘æ—¶ï¼Œè¿™ä¸ªäº‹ä»¶å¹¶ä¸åªåœ¨å½“å‰å…ƒç´ ä¸Šè§¦å‘ã€‚

åœ¨å†’æ³¡é˜¶æ®µäº‹ä»¶ä¼šä»ç›®æ ‡çš„çˆ¶çº§ä¾æ¬¡å‘ä¸Šä¼ é€’ç›´åˆ° `window` ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšäº‹ä»¶å†’æ³¡ã€‚

å¦‚æœæœ‰è¿™æ ·çš„ HTML ç‰‡æ®µï¼š

```html
 <div class="grandparent">
     <div class="parent">
         <div class="child">1</div>
     </div>
</div>
```

js ä»£ç ï¼š

```js
function addEvent(el, event, callback, isCapture = false) {
  if (!el || !event || !callback || typeof callback !== 'function') return;
  if (typeof el === 'string') {
    el = document.querySelector(el);
  };
  el.addEventListener(event, callback, isCapture);
}

addEvent(document, 'DOMContentLoaded', () => {
  const child = document.querySelector('.child');
  const parent = document.querySelector('.parent');
  const grandparent = document.querySelector('.grandparent');

  addEvent(child, 'click', function (e) {
    console.log('child');
  });

  addEvent(parent, 'click', function (e) {
    console.log('parent');
  });

  addEvent(grandparent, 'click', function (e) {
    console.log('grandparent');
  });

  addEvent(document, 'click', function (e) {
    console.log('document');
  });

  addEvent('html', 'click', function (e) {
    console.log('html');
  })

  addEvent(window, 'click', function (e) {
    console.log('window');
  })

});
```

`addEventListener` çš„ç¬¬ä¸‰ä¸ªå‚æ•° `useCapture` é»˜è®¤ä¸º `false`ï¼Œè¡¨ç¤ºäº‹ä»¶å°†åœ¨å†’æ³¡é˜¶æ®µæ‰§è¡Œã€‚

å¦‚æœæˆ‘ä»¬ç‚¹å‡» `class` ä¸º `child` çš„å…ƒç´ ï¼Œæ§åˆ¶å°å°†ä¾æ¬¡æ‰“å° `child`ã€`parent`ã€`grandparent`ã€ `html`ã€`document` å’Œ `window`ï¼Œè¿™å°±æ˜¯äº‹ä»¶å†’æ³¡ã€‚

## 8. ä»€ä¹ˆæ˜¯äº‹ä»¶æ•è·ï¼Ÿ

å½“äº‹ä»¶åœ¨ä¸€ä¸ªDOMå…ƒç´ ä¸Šè§¦å‘æ—¶ï¼Œè¿™ä¸ªäº‹ä»¶å¹¶ä¸åªåœ¨å½“å‰å…ƒç´ ä¸Šè§¦å‘ã€‚

åœ¨æ•è·é˜¶æ®µäº‹ä»¶ä¼šä» `window`  ä¾æ¬¡å‘ä¸‹ä¼ é€’ï¼Œç›´åˆ°ç›®æ ‡çš„çˆ¶å…ƒç´ ï¼Œè¿™ä¸ªè¿‡ç¨‹å«åšäº‹ä»¶æ•è·ã€‚

å¦‚æœæœ‰è¿™æ ·çš„ HTML ç‰‡æ®µï¼š

```html
 <div class="grandparent">
     <div class="parent">
         <div class="child">1</div>
     </div>
</div>
```

js ä»£ç ï¼š

```js
function addEvent(el, event, callback, isCapture = false) {
  if (!el || !event || !callback || typeof callback !== 'function') return;
  if (typeof el === 'string') {
    el = document.querySelector(el);
  };
  el.addEventListener(event, callback, isCapture);
}

addEvent(document, 'DOMContentLoaded', () => {
  const child = document.querySelector('.child');
  const parent = document.querySelector('.parent');
  const grandparent = document.querySelector('.grandparent');

  addEvent(child, 'click', function (e) {
    console.log('child');
  }, true);

  addEvent(parent, 'click', function (e) {
    console.log('parent');
  }, true);

  addEvent(grandparent, 'click', function (e) {
    console.log('grandparent');
  }, true);

  addEvent(document, 'click', function (e) {
    console.log('document');
  }, true);

  addEvent('html', 'click', function (e) {
    console.log('html');
  }, true)

  addEvent(window, 'click', function (e) {
    console.log('window');
  }, true)

});
```

`addEventListener` çš„ç¬¬ä¸‰ä¸ªå‚æ•° `useCapture` ä¸º `true` æ—¶ï¼Œè¡¨ç¤ºäº‹ä»¶å°†åœ¨æ•è·é˜¶æ®µæ‰§è¡Œã€‚

å¦‚æœæˆ‘ä»¬ç‚¹å‡» `class` ä¸º `child` çš„å…ƒç´ ï¼Œæ§åˆ¶å°å°†ä¾æ¬¡æ‰“å° `window`ã€`document`ã€`html`ã€ `grandparent` ã€`parent`  å’Œ `child`ï¼Œè¿™å°±æ˜¯äº‹ä»¶æ•è·ã€‚

## 9. `event.preventDefault()` å’Œ `event.stopPropagation()` æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

- `event.preventDefault()` æ–¹æ³•ç”¨æ¥é˜»æ­¢äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºã€‚

  ä¾‹å¦‚ï¼šåœ¨ä¸€ä¸ª `checkbox` å…ƒç´ çš„ `click` äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è°ƒç”¨ `event.preventDefault()`ï¼Œè¯¥  `checkbox` å°†æ— æ³•è¢«é€‰ä¸­ï¼›æˆ–åœ¨ä¸€ä¸ª `form` å…ƒç´ çš„ `submit` äº‹ä»¶å¤„ç†å‡½æ•°ä¸­è°ƒç”¨ `event.preventDefault()`ï¼Œè¯¥ `form` çš„é»˜è®¤æäº¤è¡Œä¸ºå°†è¢«é˜»æ­¢ã€‚

- `event.stopPropagation)()` æ–¹æ³•ç”¨æ¥é˜»æ­¢äº‹ä»¶ä¼ æ’­ï¼Œæˆ–è€…è¯´æ˜¯é˜»æ­¢äº‹ä»¶åœ¨å†’æ³¡æˆ–æ•è·é˜¶æ®µæ‰§è¡Œã€‚

## 10. å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå…ƒç´ çš„äº‹ä»¶ä¸­æ˜¯å¦ä½¿ç”¨äº† `event.prevenDefault()` æ–¹æ³•ï¼Ÿ

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `event` å¯¹è±¡ä¸Šçš„ `defaultPrevented` å±æ€§æ¥åˆ¤æ–­ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºè¯¥äº‹ä»¶æ˜¯å¦è°ƒç”¨äº† `prevenDefault()` æ–¹æ³•ã€‚

## 11. ä¸ºä»€ä¹ˆè¿™æ®µä»£ç ä¸­ `obj.someProp.x` ä¼šæŠ¥é”™ï¼Ÿ

```js
const obj = {}
console.log(obj.someProp.x) // Uncaught TypeError: Cannot read properties of undefined (reading 'x')
```

`someProp` åœ¨ `obj` ä¸­å¹¶ä¸å­˜åœ¨ï¼Œæ‰€ä»¥å®ƒçš„å€¼ä¸º `undefined`ï¼Œ`undefined` ä¸Šæ²¡æœ‰ä»»ä½•å±æ€§å¯ä»¥è¯»å–ï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚

## 12. `event.target` æ˜¯ä»€ä¹ˆï¼Ÿ

`event.target` æ˜¯è§¦å‘äº‹ä»¶çš„å¯¹è±¡ï¼ˆæŸä¸ªdomå…ƒç´ ï¼‰çš„å¼•ç”¨ã€‚

```html
<div onclick="handleClick(event)" style="text-align: center;margin:15px; border:1px solid red;border-radius:3px;">
    <div style="margin: 25px; border:1px solid royalblue;border-radius:3px;">
        <div style="margin:25px;border:1px solid skyblue;border-radius:3px;">
            <button style="margin:10px">Button</button>
        </div>
    </div>
</div>

<script>
function handleClick(event) {
    console.log(event.target); // <button style="margin:10px">Button</button>
}
</script>
```

å¦‚ä¸Šå®ä¾‹ï¼Œå½“æˆ‘ä»¬ç‚¹å‡» `button` æ—¶ï¼Œå°½ç®¡äº‹ä»¶å¤„ç†å‡½æ•°è¢«æ·»åŠ åœ¨æœ€å¤–å±‚çš„ `div`ï¼Œ`event.target` ä¹Ÿè¿˜æ˜¯ `button` å…ƒç´ ã€‚

## 13. `event.currentTarget` æ˜¯ä»€ä¹ˆï¼Ÿ

`event.currentTarget` æŒ‡çš„æ˜¯äº‹ä»¶çš„å½“å‰ç›®æ ‡ï¼Œå®ƒ**æ€»æ˜¯æŒ‡å‘äº‹ä»¶ç»‘å®šçš„å…ƒç´ **ã€‚

```html
<div onclick="handleClick(event)" style="text-align: center;margin:15px; border:1px solid red;border-radius:3px;">
    <div style="margin: 25px; border:1px solid royalblue;border-radius:3px;">
        <div style="margin:25px;border:1px solid skyblue;border-radius:3px;">
            <button style="margin:10px">Button</button>
        </div>
    </div>
</div>

<script>
function handleClick(event) {
    console.log(event.currentTarget); // <div onclick="handleClick(event)" style="text-align: center;margin:15px; border:1px solid red;border-radius:3px;">...</div>
}
</script>
```

è¿˜æ˜¯è¿™ä¸ªä¾‹å­ï¼Œç‚¹å‡» `button` æ—¶ï¼Œ`event.currentTarget` æŒ‡å‘æœ€å¤–å±‚ç»‘å®šç‚¹å‡»äº‹ä»¶çš„ `div` çš„å¼•ç”¨ã€‚

## 14. `==` å’Œ `===` æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

`==` ä¼šæŠŠè¦æ¯”è¾ƒçš„å€¼å¼ºåˆ¶è½¬æ¢ä¸ºåŒç±»å‹ï¼Œå†æ¯”è¾ƒå€¼ï¼›`===` ä¸ä¼šå¯¹æ“ä½œå¯¹è±¡è¿›è¡Œå¼ºåˆ¶è½¬æ¢ï¼Œè€Œæ˜¯æ¯”è¾ƒæ“ä½œå¯¹è±¡çš„å€¼å’Œç±»å‹ã€‚

å¼ºåˆ¶ç±»å‹è½¬æ¢æ˜¯æŒ‡å°†å€¼ä»ä¸€ç§æ•°æ®ç±»å‹è‡ªåŠ¨æˆ–éšå¼åœ°è½¬æ¢ä¸ºå¦ä¸€ç§æ•°æ®ç±»å‹ï¼Œåœ¨ä½¿ç”¨ `==` æ¯”è¾ƒä¸¤ä¸ªå€¼æ—¶ä¼šå¯¹å®ƒä»¬è¿›è¡Œå¼ºåˆ¶ç±»å‹è½¬æ¢ï¼›å‡å¦‚æˆ‘ä»¬è¦æ¯”è¾ƒ `x == y`ï¼š

1. å¦‚æœ `x` å’Œ `y` ç±»å‹ç›¸åŒï¼Œåˆ™æ¯”è¾ƒå®ƒä»¬çš„å€¼ï¼›
2. å¦‚æœ `x` ä¸º `null` `y` ä¸º `undefined`ï¼Œåˆ™è¿”å› `true`ï¼›
3. å¦‚æœ `x` ä¸º `undefined` `y` ä¸º `null`ï¼Œåˆ™è¿”å› `true`ï¼›
4. å¦‚æœ `x` æ˜¯ `number` ç±»å‹ï¼Œ`y` æ˜¯ `string` ç±»å‹ï¼Œåˆ™è¿”å› `x == Number(y)`ï¼›
5. å¦‚æœ `x` æ˜¯ `string` ç±»å‹ï¼Œ`y` æ˜¯ `number` ç±»å‹ï¼Œåˆ™è¿”å› `Number(x) == y`ï¼›
6. å¦‚æœ `x` æ˜¯ `boolean` ç±»å‹ï¼Œ`y` ä¸æ˜¯ `boolean` ç±»å‹ï¼Œåˆ™è¿”å› `number(x) == y`ï¼›
7. å¦‚æœ `x` ä¸æ˜¯ `boolean` ç±»å‹ï¼Œ`y` æ˜¯ `boolean` ç±»å‹ï¼Œåˆ™è¿”å› `x == number(y)`ï¼›
8. å¦‚æœ `x` æ˜¯åŸºæœ¬ç±»å‹ï¼Œ`y` æ˜¯ `object` ï¼Œåˆ™è¿”å› `x == toPrimitive(y)`ï¼›
9. å¦‚æœ `x` æ˜¯ `object` ï¼Œ`y` æ˜¯åŸºæœ¬ç±»å‹ï¼Œåˆ™è¿”å› `toPrimitive(x) == y`ï¼›
10. å¦åˆ™ï¼Œè¿”å› `false`ã€‚

> `toPrimitive` æ˜¯æŒ‡å®šäº†ä¸€ç§æ¥å—é¦–é€‰ç±»å‹å¹¶è¿”å›å¯¹è±¡åŸå§‹å€¼çš„è¡¨ç¤ºçš„æ–¹æ³•ï¼Œè¯¦ç»†è¯·æŸ¥çœ‹ [MDN - Symbol.toPrimitive

```js
console.log(5 == 5) // true
console.log(1 == '1') // true
console.log(null == undefined) // true
console.log(0 == false) // true
console.log('1,2' == [1, 2]) // true
console.log('[object Object]' == {}) // true
```
æŠŠ `==` æ”¹ä¸º `===`ï¼š

```js
console.log(5 === 5) // true
console.log(1 === '1') // false
console.log(null === undefined) // false
console.log(0 === false) // false
console.log('1,2' === [1, 2]) // false
console.log('[object Object]' === {}) // false
```

## 15. ä¸ºä»€ä¹ˆæ¯”è¾ƒä¸¤ä¸ªç›¸ä¼¼çš„å¯¹è±¡æ—¶ä¼šè¿”å› `false`ï¼Ÿ

```js
let a = { a: 1 }
let b = { a: 1 }
let c = a
console.log(a == b) // false
console.log(a === b) // false
console.log(a == c) // true
console.log(a === c) // true
```

JS ä»¥ä¸åŒçš„æ–¹å¼æ¯”è¾ƒå¯¹è±¡å’ŒåŸºæœ¬ç±»å‹ï¼›js é€šè¿‡å€¼æ¯”è¾ƒåŸºæœ¬ç±»å‹ï¼Œè€Œæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ—¶ï¼Œjsé€šè¿‡æ¯”è¾ƒå¯¹è±¡çš„å¼•ç”¨æˆ–å†…å­˜åœ°å€å¯¹å®ƒä»¬è¿›è¡Œæ¯”è¾ƒã€‚`a` å’Œ `b` æ˜¯åˆ†åˆ«å¯¹ä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œå®ƒä»¬å€¼çš„å†…å­˜åœ°å€å¹¶ä¸åŒï¼›è€Œ `a` å’Œ `c` æŒ‡å‘åŒä¸€ä¸ªå¼•ç”¨æˆ–å†…å­˜åœ°å€ã€‚

## 16. `!!` æœ‰ä»€ä¹ˆç”¨ï¼Ÿ

`!!` æ“ä½œç¬¦å¯ä»¥å°†å³ä¾§å€¼å¼ºåˆ¶è½¬æ¢ä¸º `boolean` ç±»å‹ã€‚

```js
console.log(!!null) // false
console.log(!!undefined) // false
console.log(!!'') // false
console.log(!!0) // false
console.log(!!NaN) // false
console.log(!!' ') // true
console.log(!!{}) // true
console.log(!![]) // true
console.log(!!1) // true
console.log(!![].length) // false
```

 ## 17. å¦‚ä½•è®¡ç®—ä¸€è¡Œä¸­çš„å¤šä¸ªè¡¨è¾¾å¼ï¼Ÿ

å¯ä»¥ä½¿ç”¨ `,` è¿ç®—ç¬¦ï¼Œå®ƒä»å·¦åˆ°å³è®¡ç®—å¹¶è¿”å›æœ€å³ä¾§çš„å€¼æˆ–è®¡ç®—ç»“æœã€‚

```js
let x = 5

x = (x++, x = addFive(x), x *= 2, x -= 5, x += 10)
console.log(x) // 27

function addFive(num) {
    return num + 5
}
```

ä¸Šè¾¹çš„ç¤ºä¾‹æ‹¬å·ä¸­çš„è¡¨è¾¾å¼ä¼šä»å·¦åˆ°å³ä¾æ¬¡è®¡ç®— `x` çš„å€¼ï¼Œå¹¶æœ€åä¼šè¿”å›æœ€å³ä¾§è¡¨è¾¾å¼çš„è®¡ç®—ç»“æœã€‚

## 18. ä»€ä¹ˆæ˜¯å˜é‡æå‡ï¼Ÿ

å˜é‡æå‡æ˜¯æŒ‡ js ä¸­å˜é‡å’Œå‡½æ•°çš„å£°æ˜ï¼Œä¼šè¢«æå‡è‡³ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚ï¼ˆæ³¨æ„ï¼š**ç”¨ `let` å’Œ `const` å£°æ˜çš„å˜é‡æˆ–ç®­å¤´å‡½æ•°å’Œå‡½æ•°è¡¨è¾¾å¼å£°æ˜çš„å‡½æ•°ä¸ä¼šæå‡**ï¼‰

ä¸ºäº†ç†è§£å˜é‡æå‡ï¼Œè¿™é‡Œå¿…é¡»è§£é‡Šä¸€ä¸‹ **JavaScriptæ‰§è¡Œä¸Šä¸‹æ–‡**ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡æ˜¯è¯„ä¼°å’Œæ‰§è¡Œ JavaScript ä»£ç çš„ç¯å¢ƒçš„æŠ½è±¡æ¦‚å¿µã€‚æ¯å½“ Javascript ä»£ç åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œå®ƒéƒ½æ˜¯åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è¿è¡Œã€‚æ‰§è¡Œä¸Šä¸‹æ–‡æœ‰ç¼–è¯‘å’Œæ‰§è¡Œä¸¤ä¸ªé˜¶æ®µï¼š

åœ¨ç¼–è¯‘é˜¶æ®µï¼Œå®ƒä¼šè·å–æ‰€æœ‰å‡½æ•°å£°æ˜å¹¶å°†å®ƒä»¬æå‡åˆ°ä½œç”¨ä¸é¡¶éƒ¨ï¼Œç„¶åè·å–æ‰€æœ‰å˜é‡å£°æ˜ï¼ˆä½¿ç”¨ varï¼‰æŠŠå®ƒä»¬æå‡è‡³ä½œç”¨åŸŸé¡¶éƒ¨å¹¶åˆå§‹åŒ–ä¸º `undefined`ã€‚

åœ¨æ‰§è¡Œé˜¶æ®µï¼Œå®ƒä¼šä¸ºä¹‹å‰æå‡çš„å˜é‡èµ‹å€¼ï¼Œæ‰§è¡Œæˆ–è°ƒç”¨å‡½æ•°ã€‚

```js
console.log(y) // undefined
y = 1
console.log(y) // 1
console.log(greet("Mark")) // Hello Mark!

function greet(name){
    return 'Hello ' + name + '!'
}

var y
```

ä¸Šè¾¹çš„ä»£ç åœ¨ç¼–è¯‘é˜¶æ®µå¤§æ¦‚åƒè¿™æ ·ï¼š

```js
function greet(name) {
  return 'Hello ' + name + '!'
}

var y // éšå¼çš„èµ‹å€¼ undefined
```

æ‰§è¡Œé˜¶æ®µï¼š

```js
function greet(name) {
  return 'Hello ' + name + '!'
}

var y

console.log(y)
y = 1
console.log(y)
console.log(greet("Mark"))
```

## 19. ä»€ä¹ˆæ˜¯ä½œç”¨åŸŸï¼Ÿ

ä½œç”¨åŸŸæ˜¯æŒ‡æˆ‘ä»¬åœ¨ JavaScript ä¸­å¯ä»¥æœ‰æ•ˆè®¿é—®å˜é‡å’Œå‡½æ•°çš„åŒºåŸŸï¼ˆä¹Ÿå°±æ˜¯å½“å‰çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼‰ï¼ŒJavaScript ä¸­æœ‰ä¸‰ç§ä½œç”¨åŸŸï¼š

- **å…¨å±€ä½œç”¨åŸŸ** - åœ¨è„šæœ¬æ¨¡å¼ä¸‹è¿è¡Œæ‰€æœ‰ä»£ç çš„é»˜è®¤ä½œç”¨åŸŸï¼›

  ```js
  var g = 'global scope'
  function globalFn() {
      console.log(g)
  }
  globalFn() // global scope
  ```

- **æ¨¡å—ä½œç”¨åŸŸ** - åœ¨æ¨¡å—ä¸­è¿è¡Œçš„ä»£ç çš„ä½œç”¨åŸŸã€‚

  ```js
  // lib.js
  var a = 'module scope'
  export var b = 'exported variable'
  
  // main.js
  import { b } from './lib.js'
  
  console.log(b) // exported variable
  console.log(a) // Uncaught ReferenceError: a is not defined
  ```

- **å‡½æ•°ä½œç”¨åŸŸ** - ç”±å‡½æ•°åˆ›å»ºçš„ä½œç”¨åŸŸï¼›

  ```js
  function fn() {
      var a = 'function scope'
      console.log(a)
  }
  fn() // function scope
  console.log(a) // Uncaught ReferenceError: a is not defined
  ```

æ­¤å¤–ï¼Œç”¨ `let` å’Œ `const` å£°æ˜çš„å˜é‡å¯ä»¥å±äºä¸€ä¸ªé¢å¤–çš„ä½œç”¨åŸŸï¼š

- **å—çº§ä½œç”¨åŸŸ** - ç”¨ä¸€å¯¹å¤§æ‹¬å·åˆ›å»ºçš„ä½œç”¨åŸŸã€‚

  ```js
  if (true) {
      var a = 'var variable'
      let b = 'let variable'
  }
  console.log(a) // let variable
  console.log(b) // Uncaught ReferenceError: b is not defined
  ```

ä½œç”¨åŸŸä¹Ÿæ˜¯ä¸€ç»„æŸ¥æ‰¾å˜é‡çš„è§„åˆ™ã€‚å¦‚æœå˜é‡åœ¨å½“å‰ä½œç”¨åŸŸä¸­ä¸å­˜åœ¨ï¼Œå®ƒä¼šæŸ¥æ‰¾å®ƒçš„ä¸Šçº§ä½œç”¨åŸŸä¸­æŸ¥æ‰¾ï¼Œå¦‚æœè¿˜ä¸å­˜åœ¨å®ƒä¼šä¾æ¬¡å‘ä¸Šæœç´¢ï¼Œç›´åˆ°å…¨å±€ä½œç”¨åŸŸï¼Œå¦‚æœå˜é‡è¢«æ‰¾åˆ°åˆ™å¯ä»¥ä½¿ç”¨ï¼Œå¦åˆ™å°†ä¼šæŠ¥é”™ã€‚å®ƒä¼šä¼˜å…ˆæœç´¢ä½¿ç”¨æœ€è¿‘çš„ä½œç”¨åŸŸä¸­çš„å˜é‡ï¼Œä¸€æ—¦æ‰¾åˆ°åˆ™åœæ­¢æœç´¢ã€‚è¿™ä¹Ÿå«åš **ä½œç”¨åŸŸé“¾**ã€‚

```js
//Global Scope
var a = "Comrades"
var b = "Sayonara"

function outer(){
    // outer's scope
    var a = "World"
    function inner(){
        // inner's scope
        var b = "Hello"
        console.log(b + " " + a)
    }
    inner()
}  
outer() // Hello World
```

![scope chain](https://cdn.jsdelivr.net/gh/zxyongyo/pictures/blog/202302201634511.png)

## 20. ä»€ä¹ˆæ˜¯é—­åŒ…ï¼Ÿ

å½“å‡½æ•°å¯ä»¥è®°ä½å¹¶è®¿é—®æ‰€åœ¨çš„è¯æ³•ä½œç”¨åŸŸæ—¶ï¼Œå°±äº§ç”Ÿäº†é—­åŒ…ï¼Œå³ä½¿å‡½æ•°æ˜¯åœ¨å½“å‰è¯æ³•ä½œç”¨åŸŸä¹‹å¤–æ‰§è¡Œã€‚

```js
function foo() {
    var a = 2
    function bar() {
        console.log(a)
    }
    return bar
}
var baz = foo()
baz() // 2
```

å‡½æ•° `bar()` çš„è¯æ³•ä½œç”¨åŸŸèƒ½å¤Ÿè®¿é—® `foo()` çš„å†…éƒ¨ä½œç”¨åŸŸã€‚ç„¶åæˆ‘ä»¬å°† `bar() ` å‡½æ•°æœ¬èº«å½“ä½œä¸€ä¸ªå€¼ç±»å‹è¿›è¡Œä¼ é€’ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°† `bar` æ‰€å¼•ç”¨çš„å‡½æ•°å¯¹è±¡æœ¬èº«å½“ä½œè¿”å›å€¼ã€‚

åœ¨ `foo()` æ‰§è¡Œåï¼Œå…¶è¿”å›å€¼ï¼ˆä¹Ÿå°±æ˜¯å†…éƒ¨çš„ `bar()` å‡½æ•°ï¼‰èµ‹å€¼ç»™å˜é‡ `baz` å¹¶è°ƒç”¨ `baz()`ï¼Œå®é™…ä¸Šåªæ˜¯é€šè¿‡ä¸åŒçš„æ ‡è¯†ç¬¦å¼•ç”¨è°ƒç”¨äº†å†…éƒ¨çš„å‡½æ•° `bar()`ã€‚

`bar()` æ˜¾ç„¶å¯ä»¥è¢«æ­£å¸¸æ‰§è¡Œã€‚ä½†æ˜¯åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒåœ¨è‡ªå·±å®šä¹‰çš„è¯æ³•ä½œç”¨åŸŸä»¥å¤–çš„åœ°æ–¹æ‰§è¡Œã€‚

åœ¨ `foo()` æ‰§è¡Œåï¼Œé€šå¸¸ä¼šæœŸå¾… `foo()` çš„æ•´ä¸ªå†…éƒ¨ä½œç”¨åŸŸéƒ½è¢«é”€æ¯ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“å¼•æ“æœ‰åƒåœ¾å›æ”¶å™¨ç”¨æ¥é‡Šæ”¾ä¸å†ä½¿ç”¨çš„å†…å­˜ç©ºé—´ã€‚ç”±äºçœ‹ä¸Šå» `foo()` çš„å†…å®¹ä¸ä¼šå†è¢«ä½¿ç”¨ï¼Œæ‰€ä»¥å¾ˆè‡ªç„¶åœ°ä¼šè€ƒè™‘å¯¹å…¶è¿›è¡Œå›æ”¶ã€‚

è€Œé—­åŒ…çš„â€œç¥å¥‡â€ä¹‹å¤„æ­£æ˜¯å¯ä»¥é˜»æ­¢è¿™ä»¶äº‹æƒ…çš„å‘ç”Ÿã€‚äº‹å®ä¸Šå†…éƒ¨ä½œç”¨åŸŸä¾ç„¶å­˜åœ¨ï¼Œå› æ­¤æ²¡æœ‰è¢«å›æ”¶ã€‚è°åœ¨ä½¿ç”¨è¿™ä¸ªå†…éƒ¨ä½œç”¨åŸŸï¼ŸåŸæ¥æ˜¯ `bar()` æœ¬èº«åœ¨ä½¿ç”¨ã€‚

æ‹œ `bar()` æ‰€å£°æ˜çš„ä½ç½®æ‰€èµï¼Œå®ƒæ‹¥æœ‰æ¶µç›– `foo()` å†…éƒ¨ä½œç”¨åŸŸçš„é—­åŒ…ï¼Œä½¿å¾—è¯¥ä½œç”¨åŸŸèƒ½å¤Ÿä¸€ç›´å­˜æ´»ï¼Œä»¥ä¾› `bar()` åœ¨ä¹‹åä»»ä½•æ—¶é—´è¿›è¡Œå¼•ç”¨ã€‚

`bar()` ä¾ç„¶æŒæœ‰å¯¹è¯¥ä½œç”¨åŸŸçš„å¼•ç”¨ï¼Œè€Œè¿™ä¸ªå¼•ç”¨å°±å«ä½œé—­åŒ…ã€‚

> å¼•ç”¨è‡ª [ã€Šä½ ä¸çŸ¥é“çš„JavaScriptï¼ˆä¸Šå·ï¼‰ã€‹](https://book.douban.com/subject/26351021/)

## 21. JS ä¸­éƒ½æœ‰å“ªäº›"å‡å€¼"ï¼Ÿ

```js
const falsyValues = ['', 0, null, undefined, NaN, false]
```

å‡å€¼ æ˜¯æŒ‡è½¬ä¸º `boolean` åä¸º `false` çš„å€¼ã€‚ 

## 22. å¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯"å‡å€¼"ï¼Ÿ

ä½¿ç”¨ `Boolean()` å‡½æ•°æˆ– `!!` æ“ä½œç¬¦ã€‚

## 23. `use strict` æœ‰ä»€ä¹ˆç”¨ï¼Ÿ

`use strict` æ˜¯ `ES5` çš„ä¸€ä¸ªç‰¹æ€§ï¼Œç”¨æ¥å¼€å¯ä¸¥æ ¼æ¨¡å¼ï¼Œåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹å¯ä»¥å¸®æˆ‘ä»¬æå‰è§„é¿ä¸€äº›ä»£ç å¯èƒ½çš„é”™è¯¯ã€‚

- é™åˆ¶åˆ†é…æœªå£°æ˜çš„å˜é‡ï¼š

  ```js
  function returnY() {
      'use strict'
      y = 10
      return y
  }
  returnY() // Uncaught ReferenceError: y is not defined
  ```

- é™åˆ¶ä¸ºåªè¯»æˆ–ä¸å¯å†™çš„å…¨å±€å˜é‡èµ‹å€¼ï¼š

  ```js
  'use strict'
  var NaN = NaN
  var undefined = undefined
  var Infinity = 'a'
  ```

- åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§ï¼š

  ```js
  'use strict'
  const obj = {}
  
  Object.defineProperty(obj, 'x', {
      value: '1'
  })
  
  delete obj.x
  ```

- é‡å¤çš„å‡½æ•°å‚æ•°åï¼š

  ```js
  'use strict'
        
  function fn(a, b, b, c) {
  
  }
  ```

- ä½¿ç”¨ `eval()` å‡½æ•°åˆ›å»ºå˜é‡ï¼š

  ```js
  'use strict'
        
  eval('var a = 1')
  console.log(a)
  ```

- `this` çš„é»˜è®¤å€¼å°†æ˜¯ `undefined`ï¼š

  ```js
  'use strict'
        
  function returnThis() {
      return this
  }
  
  console.log(returnThis()) // undefined
  ```

- è¿˜æœ‰[æ›´å¤šçš„ç‰¹æ€§](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Strict_mode)å°±ä¸ä¸€ä¸€åˆ—ä¸¾äº†ã€‚

## 24. JS ä¸­çš„ `this` æ˜¯ä»€ä¹ˆï¼Ÿ

åœ¨å…¨å±€ä½œç”¨åŸŸä¸‹ï¼Œ`this` å§‹ç»ˆæŒ‡å‘å…¨å±€å¯¹è±¡ `window`ï¼ˆåœ¨æµè§ˆå™¨ä¸­ï¼‰ã€‚

```js
console.log(this === window) // true

a = 10
console.log(window.a) // 10

this.b = 'xxx'
console.log(b) // 'xxx'
console.log(window.b) // 'xxx'
```

å‡½æ•°ä¸­çš„ `this` å…³é”®å­—åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹å–å†³äºå‡½æ•°çš„è°ƒç”¨æ–¹å¼ã€‚`this` ä¸èƒ½åœ¨æ‰§è¡ŒæœŸé—´è¢«èµ‹å€¼ï¼Œå¹¶ä¸”åœ¨æ¯æ¬¡å‡½æ•°è¢«è°ƒç”¨æ—¶ `this` çš„å€¼ä¹Ÿå¯èƒ½ä¼šä¸åŒã€‚æ­¤å¤–åœ¨ä¸¥æ ¼æ¨¡å¼å’Œéä¸¥æ ¼æ¨¡å¼ä¸­ä¹Ÿä¼šæœ‰ä¸€äº›å·®åˆ«ã€‚å¦å¤–ï¼Œåœ¨è°ƒç”¨å‡½æ•°æ—¶è¿˜å¯ä»¥é€šè¿‡ `bind(), call(), apply()` æ–¹æ³•æ”¹å˜å‡½æ•°ä¸­ `this` çš„å€¼ã€‚

```js
function f1() {
    return this
}
console.log(f1() === window) // true
```

åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œå¦‚æœè¿›å…¥æ‰§è¡Œç¯å¢ƒæ—¶æ²¡æœ‰è®¾ç½® `this` çš„å€¼ï¼Œ`this` å°†ä¿æŒä¸º `undefined`ï¼š

```js
function f2() {
    'use strict'
    return this
}
console.log(f2()) // undefined
console.log(window.f2()) // Window
```

ä½¿ç”¨ `call()` å’Œ `apply()` æ”¹å˜å‡½æ•°å†… `this`ï¼š

```js
var obj = {a: 'obj a'}

var a = 'global a'

function whatsThis() {
    console.log(this.a)
}

whatsThis() // global a
whatsThis.call(obj) // obj a
whatsThis.apply(obj) // obj a
```

è°ƒç”¨ `f.bind(someObject)` ä¼šåˆ›å»ºä¸€ä¸ªä¸ `f` å…·æœ‰ç›¸åŒå‡½æ•°ä½“å’Œä½œç”¨åŸŸçš„å‡½æ•°ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªæ–°å‡½æ•°ä¸­ï¼Œ`this` å°†æ°¸ä¹…åœ°è¢«ç»‘å®šåˆ°äº† `bind` çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæ— è®ºè¿™ä¸ªå‡½æ•°æ˜¯å¦‚ä½•è¢«è°ƒç”¨çš„ï¼š

```js
function f() {
    console.log(this.a)
}

var g = f.bind({a: 'azerty'})
g() // azerty

var h = g.bind({a: 'yoo'}) // bind åªç”Ÿæ•ˆä¸€æ¬¡
h() // azerty

var o = { a: 38, f: f, g: g, h: h }
console.log(o.a)
o.f() // 38
o.g() // azerty
o.h() // azerty
```



ç®­å¤´å‡½æ•°ä¸æä¾›è‡ªèº«çš„  `this` ç»‘å®šï¼ˆç®­å¤´å‡½æ•°ä¸­ `this` çš„å€¼å°†ä¿æŒä¸ºé—­åˆè¯æ³•ä¸Šä¸‹æ–‡çš„å€¼ï¼‰ã€‚å¦‚æœå°† `this` ä¼ é€’ç»™ `bind(), call(), apply()` æ–¹æ³•æ¥è°ƒç”¨ç®­å¤´å‡½æ•°ï¼Œå®ƒå°†è¢«å¿½ç•¥ï¼š

```js
var globalObj = this
var foo = (() => this)
console.log(foo() === globalObj) // true

var obj = {foo: foo}
console.log(obj.foo === globalObj) // true

// å°è¯•ä½¿ç”¨ call æ¥ç»‘å®š this
console.log(foo.call(obj) === globalObject); // true

// å°è¯•ä½¿ç”¨ bind æ¥ç»‘å®š this
foo = foo.bind(obj);
console.log(foo() === globalObject); // true
```

å½“å‡½æ•°ä½œä¸ºå¯¹è±¡é‡Œçš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œ`this` è¢«è®¾ç½®ä¸ºè°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡ï¼š

```js
var o = {
    prop: 10,
    f: function () {
        return this.prop
    }
}
console.log(o.f()) // 10
```

å½“å‡½æ•°è¢«ç”¨ä½œäº‹ä»¶å¤„ç†å‡½æ•°æ—¶ï¼Œå®ƒçš„ `this` æŒ‡å‘è§¦å‘äº‹ä»¶çš„å…ƒç´ ï¼š

```html
<button onclick="handleClick">click me</button>

<script>
function handleClick(e) {
    console.log(this === e.currentTarget) // true
}

const button = document.querySelector('button')
button.addEventListener('click', handleClick)
</script>
```

## 25. JS ä¸­å¯¹è±¡çš„ `prototype` æ˜¯ä»€ä¹ˆï¼Ÿ

æ¯ä¸ªå®ä¾‹å¯¹è±¡ï¼ˆObjectï¼‰éƒ½æœ‰ä¸€ä¸ªç§æœ‰å±æ€§ï¼ˆ\_\_proto\_\_ï¼‰æŒ‡å‘å®ƒçš„æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼ˆ**prototype**ï¼‰ï¼Œè¿™ä¸ªåŸå‹å¯¹è±¡ä¹Ÿæœ‰è‡ªå·±çš„åŸå‹å¯¹è±¡ï¼Œå±‚å±‚å‘ä¸Šç›´åˆ° `null`ï¼Œ`null` æ²¡æœ‰åŸå‹ã€‚

å½“æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå®ƒä¼šå…ˆåœ¨å¯¹è±¡è‡ªèº«æŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾ä¸åˆ°ï¼Œåˆ™å†åˆ°åŸå‹ä¸ŠæŸ¥æ‰¾ï¼Œå±‚å±‚å‘ä¸Šç›´åˆ°æ‰¾åˆ°æˆ–æŸ¥æ‰¾åˆ° `null`ã€‚

```js
const o = {}
console.log(o.toString()) // [object Object]
console.log(obj.toString() === Object.prototype.toString()) // true
```

## 26. ä»€ä¹ˆæ˜¯ç«‹å³æ‰§è¡Œå‡½æ•°ï¼ˆIIFEï¼‰ï¼Œå®ƒæœ‰ä»€ä¹ˆç”¨ï¼Ÿ

ç«‹å³æ‰§è¡Œå‡½æ•°ï¼ˆIIFEï¼‰æ˜¯ä¸€ä¸ªåœ¨åˆ›å»ºæˆ–å£°æ˜åå°†è¢«ç«‹å³è°ƒç”¨æˆ–æ‰§è¡Œçš„å‡½æ•°ã€‚

```js
(function () {

}())

(function () {

})()

(function named(params) {

})()

(() => {

})()

(function (global) {

})(window)

const utility = (function () {
   return {
      //utilities
   }
})()
```

ä»¥ä¸Šéƒ½æ˜¯åˆ›å»º *ç«‹å³æ‰§è¡Œå‡½æ•°* æ­£ç¡®çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç»™ *ç«‹å³æ‰§è¡Œå‡½æ•°* ä¼ é€’å‚æ•°ï¼ˆå¦‚å€’æ•°ç¬¬äºŒä¸ªä¾‹å­ï¼‰ï¼Œä¹Ÿå¯ä»¥æŠŠ *ç«‹å³æ‰§è¡Œå‡½æ•°* çš„è¿”å›å€¼ä¿å­˜åˆ°ä¸€ä¸ªå˜é‡ï¼Œä»¥ä¾¿ç¨åå¼•ç”¨å®ƒã€‚

*ç«‹å³æ‰§è¡Œå‡½æ•°* çš„æœ€ä½³ç”¨é€”æ˜¯ç”¨æ¥åšä¸€äº›åˆå§‹åŒ–æ“ä½œï¼Œä»¥é¿å…ä¸å…¨å±€ä½œç”¨åŸŸä¸‹çš„å…¶å®ƒå˜é‡å‘ç”Ÿå‘½åå†²çªæˆ–æ±¡æŸ“å…¨å±€å‘½åç©ºé—´ã€‚

å‡å¦‚æˆ‘ä»¬ç°åœ¨éœ€è¦å¼•å…¥ä¸€ä¸ªå·¥å…·åŒ… `lib.js`ï¼Œè¿™ä¸ªå·¥å…·åŒ…æä¾›äº†ä¸¤ä¸ªå…¨å±€æ–¹æ³• `createGraph` å’Œ `drawGraph`ï¼Œä½†æ˜¯æˆ‘ä»¬åªéœ€è¦ç”¨ `createGraph` ï¼Œ `drawGraph` æ–¹æ³•éœ€è¦è‡ªå·±å®ç°ï¼Œå°±å¯ä»¥ç”¨ *ç«‹å³æ‰§è¡Œå‡½æ•°* æ¥åˆå§‹åŒ–ï¼š

```html
<script src="https://cdnurl.com/lib.js"></script>
<script>
  const graphUtility = (function (){
       function myDrawGraph() {
           // ...
       }
        return{
            createGraph,
            drawGraph: myDrawGraph
        }
    })()
    
    // ä½¿ç”¨
    graphUtility.createGraph()
    graphUtility.drawGraph()
</script>
```

## 27. `Function.prototype.call` æœ‰ä»€ä¹ˆç”¨ï¼Ÿ

`call` æ–¹æ³•å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæŒ‡å®šçš„ `this` å€¼æ¥è°ƒç”¨å‡½æ•°ï¼Œå³ä¼šè®¾ç½®è°ƒç”¨å‡½æ•°æ—¶å‡½æ•°ä½“å†… `this` çš„å€¼ï¼›å®ƒæ¥æ”¶ä¸€ä¸ªç”¨æ¥æŒ‡å®š `this` å€¼çš„å‚æ•°ï¼Œå’Œä¸€ä¸ªä¼ é€’ç»™å‡½æ•°çš„å‚æ•°åˆ—è¡¨ã€‚

```js
fn.call(thisArg, arg1, arg2...)
const person = {
    name: 'zxyong'
}

function greeting(greetingMessage) {
    return `${greetingMessage} ${this.name}`
}

greeting.call(person, 'hello') // hello zxyong
```

## 28. `Function.prototype.apply` æœ‰ä»€ä¹ˆç”¨ï¼Ÿ

`apply` æ–¹æ³•å¯ä»¥ä½¿ç”¨ä¸€ä¸ªæŒ‡å®šçš„ `this` å€¼æ¥è°ƒç”¨å‡½æ•°ï¼Œå³ä¼šè®¾ç½®è°ƒç”¨å‡½æ•°æ—¶å‡½æ•°ä½“å†… `this` çš„å€¼ï¼›å®ƒæ¥æ”¶ä¸€ä¸ªç”¨æ¥æŒ‡å®š `this` å€¼çš„å‚æ•°ï¼Œå’Œä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ç±»æ•°ç»„å¯¹è±¡ï¼‰ç”¨æ¥ç»™å‡½æ•°æä¾›å‚æ•°ã€‚

```js
fn.apply(thisArg, argsArray)
const person = {
    name: 'zxyong'
}

function greeting(greetingMessage) {
    return `${greetingMessage} ${this.name}`
}

greeting.apply(person, ['hello']) // hello zxyong
```

## 29. `Function.prototype.call` å’Œ `Function.prototype.apply` æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

`call` å’Œ `apply` æ–¹æ³•çš„ä½œç”¨å®Œå…¨ä¸€æ ·ï¼Œå”¯ä¸€çš„ä¸åŒå°±æ˜¯æŒ‡å®šå‡½æ•°å‚æ•°çš„æ–¹å¼ï¼Œ`call` æ–¹æ³•ä½¿ç”¨å‚æ•°åˆ—è¡¨æ¥æŒ‡å®šå‚æ•°ï¼Œ`apply` æ–¹æ³•ä½¿ç”¨æ•°ç»„ï¼ˆæˆ–ç±»æ•°ç»„å¯¹è±¡ï¼‰æ¥æŒ‡å®šå‚æ•°ã€‚

```js
const obj1 = {
    result: 0
}
const obj2 = {
    result: 0
}

function reduceAdd() {
    let result = 0
    for (let i = 0, len = arguments.length; i < len; i++) {
        result += arguments[i]
    }
    this.result = result
}

reduceAdd.call(obj1, 1, 2, 3, 4, 5)
reduceAdd.apply(obj2, [1, 2, 3, 4, 5])

console.log(obj1.result) // 15
console.log(obj2.result) //15
```

## 30. `Function.prototype.bind` æœ‰ä»€ä¹ˆç”¨ï¼Ÿ

`bind()` æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œåœ¨ `bind()` è¢«è°ƒç”¨æ—¶ï¼Œè¿™ä¸ªæ–°å‡½æ•°çš„ `this` è¢«æŒ‡å®šä¸º `bind()` çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆä¸å—æ–¹æ³•è°ƒç”¨çš„å½±å“ï¼‰ï¼Œè€Œå…¶ä½™å‚æ•°å°†ä½œä¸ºæ–°å‡½æ•°çš„é»˜è®¤å‚æ•°ï¼Œä¾›è°ƒç”¨æ—¶ä½¿ç”¨ã€‚

```js
var x = 9
var module = {
    x: 81,
    getX: function() {
        return this.x
    }
}

console.log(module.getX()) // 81

var retrieveX = module.getX
console.log(retrieveX()) // 9  - å› ä¸ºå‡½æ•°æ˜¯åœ¨å…¨å±€ä½œç”¨åŸŸè°ƒç”¨çš„

var boundGetX = retrieveX.bind(module)
console.log(boundGetX()) // 81
```

## 31. ä»€ä¹ˆæ˜¯å‡½æ•°å¼ç¼–ç¨‹ï¼ŸJS çš„å“ªäº›ç‰¹æ€§è®©å…¶æˆä¸ºå‡½æ•°å¼ç¼–ç¨‹çš„é¦–é€‰ï¼Ÿ

å‡½æ•°å¼ç¼–ç¨‹æ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼Œä¸»è¦æ˜¯åˆ©ç”¨å‡½æ•°æŠŠè¿ç®—è¿‡ç¨‹å°è£…èµ·æ¥ï¼Œé€šè¿‡ç»„åˆå„ç§å‡½æ•°æ¥è®¡ç®—ç»“æœã€‚

å°±åƒ JS çš„ `Array` æ‹¥æœ‰ `map, filter, reduce` ç­‰éå¸¸å®ç”¨çš„åŸå‹æ–¹æ³•ã€‚å› ä¸ºå®ƒä»¬éƒ½ä¸ä¼šæ”¹å˜åŸæ•°ç»„ï¼Œä½¿å®ƒä»¬æˆä¸ºäº† *çº¯å‡½æ•°*ï¼Œè€Œä¸” JS æ”¯æŒé«˜é˜¶å‡½æ•°å’Œé—­åŒ…ç­‰éƒ½æ˜¯å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€çš„ç‰¹å¾ã€‚

> çº¯å‡½æ•°æŒ‡çš„æ˜¯**ç›¸åŒçš„è¾“å…¥ï¼Œæ°¸è¿œä¼šå¾—åˆ°ç›¸åŒçš„è¾“å‡º**ã€‚

## 32. ä»€ä¹ˆæ˜¯é«˜é˜¶å‡½æ•°ï¼Ÿ

é«˜é˜¶å‡½æ•°æ˜¯æŒ‡å¯ä»¥è¿”å›å‡½æ•°æˆ–æ¥æ”¶å‚æ•°æˆ–å…·æœ‰å‡½æ•°å€¼çš„å‚æ•°çš„å‡½æ•°ã€‚

```js
function higherOrderFunction(param, callback) {
    return callback(param)
}
```

## 33. ä¸ºä»€ä¹ˆå‡½æ•°ç§°ä¸ºä¸€ç­‰å¯¹è±¡ï¼Ÿ

JS ä¸­çš„å‡½æ•°è¢«ç§°ä¸ºä¸€ç­‰å¯¹è±¡ï¼Œå› ä¸ºå®ƒä»¬è¢«è§†ä¸ºè¯­è¨€ä¸­çš„ä»»ä½•å…¶ä»–å€¼ã€‚å®ƒå¯ä»¥åˆ†é…ç»™å˜é‡ï¼Œå®ƒå¯ä»¥æ˜¯å¯¹è±¡çš„å±æ€§ï¼Œå®ƒå¯ä»¥æ˜¯æ•°ç»„ä¸­çš„ä¸€é¡¹ï¼Œå®ƒå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™å‡½æ•°ï¼Œå®ƒå¯ä»¥ä½œä¸ºå‡½æ•°çš„è¿”å›å€¼ï¼Œå‡½æ•°ä¸ JS ä¸­ä»»ä½•å…¶ä»–å€¼çš„å”¯ä¸€åŒºåˆ«åœ¨äºå®ƒå¯ä»¥è¢«è°ƒç”¨ã€‚

## 34. æ‰‹åŠ¨å®ç° `Array.prototype.map` æ–¹æ³•ã€‚

`map()` æ–¹æ³•åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œè¿™ä¸ªæ–°æ•°ç»„ç”±åŸæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ä¸€æ¬¡æä¾›çš„å‡½æ•°åçš„è¿”å›å€¼ç»„æˆã€‚

```js
function map(arr, mapCallback) {
    // æŸ¥éªŒå‚æ•°
    if (!Array.isArray(arr) || !arr.length || typeof mapCallback !== 'function') {
        return []
    } else {
        let result = []

        for (let i = 0, len = arr.length; i < len; i++) {
            result.push(mapCallback(arr[i], i, arr))
        }
        return result
    }
}
```

## 35. æ‰‹åŠ¨å®ç° `Array.prototype.filter` æ–¹æ³•ã€‚

`filter()` æ–¹æ³•åˆ›å»ºç»™å®šæ•°ç»„ä¸€éƒ¨åˆ†çš„æµ…æ‹·è´ï¼Œå…¶åŒ…å«é€šè¿‡æ‰€æä¾›å‡½æ•°å®ç°çš„æµ‹è¯•çš„æ‰€æœ‰å…ƒç´ ã€‚

```js
function filter(arr, filterCallback) {
    // æŸ¥éªŒå‚æ•°
    if (!Array.isArray(arr) || !arr.length || typeof filterCallback !== 'function') {
        return []
    } else {
        let result = []

        for (let i = 0, len = arr.length; i < len; i++) {
            if (filterCallback(arr[i], i, arr)) {
                result.push(arr[i])
            }
        }
        return result
    }
}
```

## 36. æ‰‹åŠ¨å®ç° `Array.prototype.reduce` æ–¹æ³•ã€‚

`reduce()` æ–¹æ³•å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æŒ‰åºæ‰§è¡Œä¸€ä¸ªç”±æ‚¨æä¾›çš„ **reducer** å‡½æ•°ï¼Œæ¯ä¸€æ¬¡è¿è¡Œ **reducer** ä¼šå°†å…ˆå‰å…ƒç´ çš„è®¡ç®—ç»“æœä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œæœ€åå°†å…¶ç»“æœæ±‡æ€»ä¸ºå•ä¸ªè¿”å›å€¼ã€‚

ç¬¬ä¸€æ¬¡æ‰§è¡Œå›è°ƒå‡½æ•°æ—¶ï¼Œä¸å­˜åœ¨â€œä¸Šä¸€æ¬¡çš„è®¡ç®—ç»“æœâ€ã€‚å¦‚æœéœ€è¦å›è°ƒå‡½æ•°ä»æ•°ç»„ç´¢å¼•ä¸º 0 çš„å…ƒç´ å¼€å§‹æ‰§è¡Œï¼Œåˆ™éœ€è¦ä¼ é€’åˆå§‹å€¼ã€‚å¦åˆ™ï¼Œæ•°ç»„ç´¢å¼•ä¸º 0 çš„å…ƒç´ å°†è¢«ä½œä¸ºåˆå§‹å€¼ï¼Œè¿­ä»£å™¨å°†ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹æ‰§è¡Œï¼ˆç´¢å¼•ä¸º 1 è€Œä¸æ˜¯ 0ï¼‰ã€‚

```js
function reduce(arr, reduceCallback, initialValue) {
    if (!Array.isArray(arr) || !arr.length || typeof reduceCallback !== 'function') {
        return [];
    } else {
        let hasInitialValue = initialValue !== undefined;
        let value = hasInitialValue ? initialValue : arr[0];

        for (let i = hasInitialValue ? 0 : 1, len = arr.length; i < len; i++) {
            value = reduceCallback(value, arr[i], i, arr); 
        }
        return value;
    }
}
```

## 37. `arguments` å¯¹è±¡æ˜¯ä»€ä¹ˆï¼Ÿ

`arguments` å¯¹è±¡æ˜¯ä¼ å…¥å‡½æ•°çš„å‚æ•°å€¼çš„é›†åˆã€‚å®ƒæ˜¯ä¸€ä¸ª[ç±»æ•°ç»„å¯¹è±¡](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Indexed_collections#%E4%BD%BF%E7%94%A8%E7%B1%BB%E6%95%B0%E7%BB%84%E5%AF%B9%E8%B1%A1)ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `Array.prototype.slice` å°†å‚æ•°å¯¹è±¡è½¬æ¢ä¸ºæ•°ç»„ã€‚

> `arguments` å¯¹è±¡ä¸èƒ½åœ¨ç®­å¤´å‡½æ•°ä¸­ä½¿ç”¨ã€‚

```js
function fn() {
    return Array.prototype.slice.call(arguments)
}

const arrowFn = (...args) => args

console.log(fn('one', 'two', 'three')) // ['one', 'two', 'three']
console.log(arrowFn('one', 'two', 'three')) // ['one', 'two', 'three']
```

## 38. å¦‚ä½•åˆ›å»ºä¸€ä¸ªæ²¡æœ‰åŸå‹çš„å¯¹è±¡ï¼Ÿ

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `Object.create()` æ¥åˆ›å»ºä¸€ä¸ªæ²¡æœ‰åŸå‹çš„å¯¹è±¡ã€‚

```js
const o1 = {}
console.log(o1.toString()) // '[object Object]'

const o2 = Object.create(null)
console.log(o2.toString()) // Uncaught TypeError: o2.toString is not a function
```

## 39. åœ¨è¿™æ®µä»£ç ä¸­ï¼Œå½“ä½ è°ƒç”¨ `fn` æ—¶ä¸ºä»€ä¹ˆ `b` å˜æˆäº†ä¸€ä¸ªå…¨å±€å˜é‡ï¼Ÿ

```js
function myFunc() {
    let a = b = 0
}

myFunc()
console.log(b) // 0
```

è¿™æ˜¯å› ä¸ºèµ‹å€¼è¿ç®—ç¬¦ï¼ˆ=ï¼‰æ˜¯ä»å³åˆ°å·¦ç»„åˆæˆ–æ±‚å€¼çš„ã€‚ä¸Šè¾¹çš„ç¤ºä¾‹å°±ç›¸å½“äºï¼š

```js
function myFunc() {
    let a = (b = 0)
}

myFunc()
console.log(b) // 0
```

é¦–å…ˆè¡¨è¾¾å¼ `b = 0` ä¼šå…ˆè¢«æ‰§è¡Œï¼Œå› ä¸ºå˜é‡ `b` è¿˜æœªå£°æ˜ï¼ŒJS ä¼šæŠŠæœªå£°æ˜å°±èµ‹å€¼çš„å˜é‡æ·»åŠ ä¸ºå…¨å±€å˜é‡ï¼›ç„¶åæŠŠ `b = 0` çš„è¿”å›å€¼ 0ï¼Œèµ‹å€¼ç»™å˜é‡ `a`ï¼Œå› ä¸º `a` å·²ç»ç”¨ `let` å…³é”®å­—å£°æ˜äº†ï¼Œåˆ™ä¼šæˆä¸ºå‡½æ•°çš„å±€éƒ¨å˜é‡ã€‚

æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ä¸€ä¸‹ä»£ç è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

```js
function myFunc() {
    let a, b
    a = b = 0
}

myFunc()
```

## 40. `ECMAScript` æ˜¯ä»€ä¹ˆï¼Ÿ

ECMAScript æ˜¯ JavaScriptæ‰€åŸºäºçš„è„šæœ¬è¯­è¨€ï¼ŒJavaScript éµå¾ª ECMAScript æ ‡å‡†çš„è§„èŒƒå˜åŒ–ã€‚

## 41. ES6 æœ‰å“ªäº›æ–°ç‰¹æ€§ï¼Ÿ

- [ç®­å¤´å‡½æ•°](#ä»€ä¹ˆæ˜¯ç®­å¤´å‡½æ•°ï¼Ÿ)
- [ç±»](#ES6-çš„-class-å…³é”®å­—æœ‰ä»€ä¹ˆç”¨ï¼Ÿ)
- [æ¨¡æ¿å­—ç¬¦ä¸²](#ä»€ä¹ˆæ˜¯æ¨¡æ¿å­—ç¬¦ä¸²ï¼Ÿ)
- å¯¹è±¡å±æ€§çš„ç®€å†™å½¢å¼
- [å¯¹è±¡è§£æ„](#å¯¹è±¡è§£æ„æ˜¯ä»€ä¹ˆï¼Ÿ)
- [Promise](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise)
- [Generator](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Generator)
- [æ¨¡å—åŒ–](#ES6-çš„æ¨¡å—æ˜¯ä»€ä¹ˆï¼Ÿ)
- [Symbol](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol)
- [ä»£ç†ï¼ˆProxyï¼‰](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy)
- [Set](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Set)
- [å‡½æ•°é»˜è®¤å‚æ•°](#ä»€ä¹ˆæ˜¯é»˜è®¤å‚æ•°ï¼Ÿ)
- [let](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/let) å’Œ [const](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/const) çš„å—ä½œç”¨åŸŸ

## 42. `let, const, var` å…³é”®å­—æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

ä½¿ç”¨ `var` å£°æ˜çš„å˜é‡æœ‰ *å£°æ˜æå‡*ï¼Œæ²¡æœ‰å—çº§ä½œç”¨åŸŸã€‚

```js
function fn(showX) {
    if (showX) {
        var x = 5
    }
    return x
}

console.log(fn(false)) // undefined
console.log(fn(true)) // 5
```

ä¸Šé¢çš„ä»£ç åœ¨å®é™…æ‰§è¡Œæ—¶å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š

```js
function fn(showX) {
    var x // å˜é‡å£°æ˜è¢«æå‡è‡³å‡½æ•°ä½œç”¨åŸŸçš„é¡¶éƒ¨ï¼Œå½“å‰é»˜è®¤ä¸º undefined
    if (showX) {
        x = 5
    }
    return x
}

console.log(fn(false)) // undefined
console.log(fn(true)) // 5
```

`let` å’Œ `const` å£°æ˜çš„å˜é‡ä¸å­˜åœ¨å˜é‡æå‡ï¼Œè€Œä¸”æœ‰å—çº§ä½œç”¨åŸŸï¼Œæ‰€ä»¥ä¸Šè¾¹çš„ç¤ºä¾‹å¦‚æœç”¨ `let` æˆ– `const` å£°æ˜å˜é‡å°±ä¼šæŠ¥é”™ï¼š

```js
function fn(showX) {
    if (showX) {
        let x = 5
    }
    return x
}

console.log(fn(true)) // Uncaught ReferenceError: x is not defined
console.log(fn(false)) // Uncaught ReferenceError: x is not defined
```

`const` å’Œ `let` çš„ä¸åŒå°±æ˜¯ï¼Œç”¨ `const` å£°æ˜çš„å˜é‡æ— æ³•é‡æ–°èµ‹å€¼ï¼Œè¿™ä¹Ÿæ„å‘³ç€ç”¨ `const` å£°æ˜å˜é‡æ—¶å¿…é¡»åŒæ—¶å¯¹å˜é‡è¿›è¡Œåˆå§‹åŒ–ã€‚

## 43. ä»€ä¹ˆæ˜¯ç®­å¤´å‡½æ•°ï¼Ÿ

**ç®­å¤´å‡½æ•°è¡¨è¾¾å¼**æ˜¯ ES6 çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒçš„è¯­æ³•æ¯”å‡½æ•°è¡¨è¾¾å¼æ›´ç®€æ´ï¼Œå¹¶ä¸”æ²¡æœ‰è‡ªå·±çš„[`this`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/this)ï¼Œ[`arguments`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/arguments)ï¼Œ[`super`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/super)æˆ–[`new.target`](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/new.target)ã€‚ç®­å¤´å‡½æ•°è¡¨è¾¾å¼æ›´é€‚ç”¨äºé‚£äº›æœ¬æ¥éœ€è¦åŒ¿åå‡½æ•°çš„åœ°æ–¹ï¼Œå¹¶ä¸”å®ƒä¸èƒ½ç”¨ä½œæ„é€ å‡½æ•°ã€‚

```js
// æ™®é€šå‡½æ•°
var getCurrentDate = function () {
    return new Date()
}
// ç®­å¤´å‡½æ•°
const getCurrentDate1 = () => new Date() // ä¸éœ€è¦ return å…³é”®å­—
// æ™®é€šå‡½æ•°
function greet(name) {
    return 'hello ' + name + '!'
}
// ç®­å¤´å‡½æ•°
const greet1 = name => `hello ${name}!` // å½“åªæœ‰ä¸€ä¸ªå‚æ•°æ—¶å¯ä»¥çœç•¥æ‹¬å·
```

## 44. ES6 çš„ `class` å…³é”®å­—æœ‰ä»€ä¹ˆç”¨ï¼Ÿ

`class` å…³é”®å­—ç”¨æ¥å£°æ˜ä¸€ä¸ªç±»ï¼Œå®ƒæ˜¯ç¼–å†™æ„é€ å‡½æ•°çš„è¯­æ³•ç³–ï¼Œåº•å±‚ä»ç„¶æ˜¯ä½¿ç”¨ JS çš„åŸå‹å’ŒåŸºäºåŸå‹çš„ç»§æ‰¿ã€‚

```js
//ES5
function Person(firstName, lastName, age, address) {
    this.firstName = firstName
    this.lastName = lastName
    this.age = age
    this.address = address
}

Person.self = function () {
    return this
}

Person.prototype.toString = function () {
    return '[object Person]'
}

Person.prototype.getFullName = function () {
    return this.firstName + ' ' + this.lastName
}

//ES6
class Person {
    constructor(firstName, lastName, age, address) {
        this.lastName = lastName
        this.firstName = firstName
        this.age = age
        this.address = address
    }

    static self() {
        return this
    }

    toString() {
        return '[object Person]'
    }

    getFullName() {
        return `${this.firstName} ${this.lastName}`
    }
}
```

## 45. ä»€ä¹ˆæ˜¯æ¨¡æ¿å­—ç¬¦ä¸²ï¼Ÿ

æ¨¡æ¿å­—ç¬¦ä¸²æ˜¯ ES6 å‡ºç°çš„åˆ›å»ºå­—ç¬¦ä¸²çš„æ–°æ–¹æ³•ï¼Œä½¿ç”¨ä¸¤ä¸ª "**`**" æ¥åˆ›å»ºå­—ç¬¦ä¸²ï¼Œåœ¨å¤„ç†å˜é‡ã€æ¢è¡Œç­‰éƒ½æ›´æ–¹ä¾¿äº†ã€‚

```js
// ES5
var greet = 'Hi I\'m Mark'
// ES6
let greet1 = `Hi I\'m Mark` // åœ¨å­—ç¬¦ä¸²ä¸­ä½¿ç”¨ ' æ—¶ä¸å†éœ€è¦è½¬ä¹‰

// ES5
var lastWords = '\n'
    + '   I  \n'
    + '   Am  \n'
    + 'Iron Man \n'
// ES6
let lastWords1 = `
  I
  Am
  Iron Man   
` // æ¢è¡Œä¸å†éœ€è¦ \n

//ES5
function greet(name) {
    return 'Hello ' + name + '!'
}
//ES6
const greet = name => {
    return `Hello ${name} !` // å˜é‡æˆ–è¡¨è¾¾å¼ä¸å†éœ€è¦ç”¨ + æ‹¼æ¥
}
```

## 46. å¯¹è±¡è§£æ„æ˜¯ä»€ä¹ˆï¼Ÿ

å¯¹è±¡è§£æ„ ä¸€ä¸ªæ˜¯ä»æ•°ç»„æˆ–å¯¹è±¡ä¸­æå–å˜é‡çš„æ–¹æ³•ã€‚

```js
const employee = {
  firstName: "Marko",
  lastName: "Polo",
  position: "Software Developer",
  yearHired: 2017
}
let firstName = employee.firstName
let lastName = employee.lastName
let position = employee.position
let yearHired = employee.yearHired
```

ä»¥ä¸Šä»£ç ç”¨è§£æ„èµ‹å€¼å¯ç®€å†™ä¸ºï¼š

```js
const employee = {
    firstName: "Marko",
    lastName: "Polo",
    position: "Software Developer",
    yearHired: 2017
}
const {firstName, lastName, position, yearHired} = employee
console.log(firstName, lastName, position, yearHired)
```

å¦‚æœæˆ‘ä»¬æƒ³åœ¨è§£æ„èµ‹å€¼çš„åŒæ—¶ä¿®æ”¹å˜é‡åå¯ä»¥å†™ä¸º `propertyName:newName`ï¼š

```js
const {
    firstName: fName, 
  lastName: lName, 
  position, 
  yearHired
} = employee
console.log(fName, lName, position, yearHired)
```

æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨ç»“æ„æ—¶æ·»åŠ ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå¦‚æœå¯¹è±¡ä¸­å¯¹è±¡çš„å±æ€§å€¼ä¸º `undefined`ï¼Œåˆ™ä¼šä½¿ç”¨é»˜è®¤å€¼ï¼š

```js
const {
    firstName: fName = 'Mark', 
    lastName: lName, 
    position, 
    yearHired
} = employee
console.log(fName, lName, position, yearHired)
```

## 47. ES6 çš„æ¨¡å—æ˜¯ä»€ä¹ˆï¼Ÿ

æ¨¡å—å¯ä»¥è®©æˆ‘ä»¬æŠŠä»£ç æ‹†åˆ†ä¸ºå¤šä¸ªå•ç‹¬çš„æ–‡ä»¶ï¼Œåœ¨éœ€è¦çš„åœ°æ–¹å¼•å…¥ï¼Œèƒ½å¤Ÿæé«˜å¯ç»´æŠ¤æ€§ã€‚åœ¨ ES6 çš„æ¨¡å—ç³»ç»Ÿå‡ºç°ä¹‹å‰å°±æœ‰ CommonJS çš„æ¨¡å—ç³»ç»Ÿã€‚

ES5 CommonJS ï¼š

```js
// helper.js
exports.isNull = function (val) {
  return val === null
}

exports.isUndefined = function (val) {
  return val === undefined
}

exports.isNullOrUndefined = function (val) {
  return exports.isNull(val) || exports.isUndefined(val)
}
// main.js
const { isNull, isUndefined, isNullOrUndefined } = require('./helpers.js')
```

ES6 Module ï¼š

```js
// helper.js
export function isNull(val){
  return val === null;
}

export function isUndefined(val) {
  return val === undefined;
}

export function isNullOrUndefined(val) {
  return isNull(val) || isUndefined(val);
}
// main.js
import { isNull, isUndefined, isNullOrUndefined } from './helpers.js'
```

ä½¿ç”¨é»˜è®¤å¯¼å‡ºï¼ˆä¸€ä¸ªæ–‡ä»¶åªèƒ½æœ‰ä¸€ä¸ªé»˜è®¤å¯¼å‡ºï¼‰ï¼š

ES5 CommonJS ï¼š

```js
// helper.js
class Helpers {
  static isNull(val) {
    return val === null
  }

  static isUndefined(val) {
    return val === undefined
  }

  static isNullOrUndefined(val) {
    return this.isNull(val) || this.isUndefined(val)
  }
}


module.exports = Helpers
// main.js
const Helpers = require('./helpers.js'); 
console.log(Helpers.isNull(null));
```

ES6 Module ï¼š

```js
// helper.js
class Helpers {
  static isNull(val) {
    return val === null
  }

  static isUndefined(val) {
    return val === undefined
  }

  static isNullOrUndefined(val) {
    return this.isNull(val) || this.isUndefined(val)
  }
}

export default Helpers
// main.js
import Helpers from '.helpers.js'
console.log(Helpers.isNull(null))
```

## 48. `Set` æ˜¯ä»€ä¹ˆï¼Ÿå®ƒæœ‰ä»€ä¹ˆç”¨ï¼Ÿ

`Set` å¯¹è±¡æ˜¯å€¼çš„é›†åˆï¼Œå®ƒå…è®¸ä½ å­˜å‚¨ä»»ä½•ç±»å‹çš„å”¯ä¸€å€¼ï¼Œæ— è®ºæ˜¯åŸå§‹å€¼æˆ–è€…æ˜¯å¯¹è±¡å¼•ç”¨ï¼Œ`Set` **ä¸­çš„å…ƒç´ æ˜¯å”¯ä¸€çš„**ã€‚

```js
const set1 = new Set()
const set2 = new Set([1, 2, 3, 4, 5])
```

æˆ‘ä»¬å¯ä»¥ç”¨ `add` æ–¹æ³•åœ¨ `Set` å¯¹è±¡å°¾éƒ¨æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œå·²ç»æœ‰çš„å…ƒç´ ä¸ä¼šè¢«é‡å¤æ·»åŠ ï¼Œ`add` æ–¹æ³•ä¼šè¿”å›è¿™ä¸ª `Set` å¯¹è±¡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é“¾å¼è°ƒç”¨ï¼š

```js
const s = new Set(['c'])

s.add('a').add('b').add('c').add('c')
console.log(s) // Set(3) {'c', 'a', 'b'}
```

ä½¿ç”¨ `delete` æ–¹æ³•ä» `Set` ä¸­ç§»é™¤ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ª `boolean` å€¼è¡¨ç¤ºåˆ é™¤æ˜¯å¦æˆåŠŸï¼š

```js
const s = new Set(['a', 'b', 'c'])

s.delete('a') // è¿”å› true
console.log(s) // Set(2) {'b', 'c'}

s.delete('a') // è¿”å› falseï¼Œå› ä¸ºå…ƒç´  'a' å·²ç»ä¸å­˜åœ¨äº†
```

ä½¿ç”¨ `has` æ–¹æ³•æ£€æŸ¥ `Set` ä¸­æ˜¯å¦æœ‰æŸä¸ªå…ƒç´ ï¼š

```js
const s = new Set(['a', 'b', 'c'])

console.log(s.has('a')) // true
console.log(s.has('z')) // false
const s = new Set(['a', 'b', 'c'])

console.log(s.size) // 3  size å±æ€§è¿”å› Set å¯¹è±¡ä¸­çš„å€¼çš„ä¸ªæ•°
s.clear() // clear æ–¹æ³•ç”¨æ¥æ¸…ç©º Set
console.log(s.size) // 0
```

æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ `Set` ç»™æ•°ç»„å»é‡ï¼š

```js
const arr = ['a', 1, 'a', 1, 'b']
const newArr = [...new Set(arr)]

console.log(newArr) // ['a', 1, 'b']
```

## 49. ä»€ä¹ˆæ˜¯å›è°ƒå‡½æ•°ï¼Ÿ

å›è°ƒå‡½æ•°æ˜¯ä½œä¸ºå®å‚ä¼ å…¥å¦ä¸€ä¸ªå‡½æ•°ï¼Œå°†åœ¨ç¨åçš„æŸä¸ªæ—¶é—´è°ƒç”¨çš„å‡½æ•°ã€‚

```js
setTimeout(function () {
    // do something
}, 1000)
```

## 50. ä»€ä¹ˆæ˜¯ `Promise`ï¼Ÿ

`Promise` æ˜¯ JS ä¸­å¤„ç†å¼‚æ­¥çš„ä¸€ç§æ–¹å¼ï¼Œå®ƒè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆï¼ˆæˆ–å¤±è´¥ï¼‰åŠå…¶ç»“æœã€‚åœ¨ `Promise` å‡ºç°ä¹‹å‰æˆ‘ä»¬åªèƒ½ä½¿ç”¨å›è°ƒå‡½æ•°æ¥å¤„ç†å¼‚æ­¥ä»£ç çš„é—®é¢˜ã€‚

ä¸€ä¸ª `Promise` å¿…ç„¶å¤„äºä¸€ä¸‹ä¸‰ç§çŠ¶æ€ä¹‹ä¸€ï¼š

- *å¾…å®šï¼ˆpendingï¼‰*ï¼šåˆå§‹çŠ¶æ€ï¼Œæ—¢æ²¡æœ‰è¢«å…‘ç°ï¼Œä¹Ÿæ²¡æœ‰è¢«æ‹’ç»ã€‚
- *å·²å…‘ç°ï¼ˆfulfilledï¼‰*ï¼šæ„å‘³ç€æ“ä½œæˆåŠŸå®Œæˆã€‚
- *å·²æ‹’ç»ï¼ˆrejectedï¼‰*ï¼šæ„å‘³ç€æ“ä½œå¤±è´¥ã€‚

`Promise` æ„é€ å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ `resolve` å’Œ `reject` å‡½æ•°ã€‚ä¸€èˆ¬å½“å¼‚æ­¥æ“ä½œå®Œæˆä¸”æ²¡æœ‰é”™è¯¯ï¼Œæˆ‘ä»¬è°ƒç”¨ `resolve` è¿”å›æ‰§è¡Œç»“æœï¼Œå¦‚æœå‘ç”Ÿé”™è¯¯æˆ‘ä»¬è°ƒç”¨ `reject` è¿”å›é”™è¯¯åŸå› ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ `.then` æ–¹æ³•è·å–å¼‚æ­¥æ‰§è¡Œçš„ç»“æœï¼Œåœ¨ `.catch` æ–¹æ³•ä¸­æ•è·æ‰§è¡Œçš„é”™è¯¯ã€‚

```js
const fs = require('fs')

const readFileSync = () => {
  return new Promise((resolve, reject) => {
    fs.readFile('./index.html', {}, (err, data) => {
      if (err) {
        reject(err)
      }
      resolve(data)
    })
  })
}

readFileSync()
  .then(data => {
    console.log(data)
  })
  .catch(err => {
    console.log(err)
  })
```

## 51. async/await æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ

`async/await` æ˜¯åœ¨ JS ä¸­ç¼–å†™å¼‚æ­¥æˆ–éé˜»å¡ä»£ç çš„æ–¹æ³•ï¼Œå®ƒæ¯”ä½¿ç”¨ `Promise` æˆ–å›è°ƒå‡½æ•°æœ‰æ›´æ–¹ä¾¿å’Œæ¸…æ™°çš„è¯­æ³•ã€‚

ä½¿ç”¨ Promiseï¼š

```js
function callApi() {
  fetch("url/to/api/endpoint")
    .then(resp => resp.json())
    .then(data => {
      console.log(data)
    }).catch(err => {
      console.log(err)
    })
}
```

ä½¿ç”¨ async/await

```js
async function callApi() {
    try {
        const resp = await fetch("url/to/api/endpoint")
        const data = await resp.json()
        console.log(data)
    } catch (e) {
        console.log(e)
    }
}
```

> å¸¦æœ‰ async å…³é”®å­—çš„å‡½æ•°ä¼šéšå¼çš„è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œawait å…³é”®å­—åªèƒ½åœ¨ async å‡½æ•°ä¸­ä½¿ç”¨ã€‚

## 52. Spread syntaxå’ŒRest parametersæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

å®ƒä»¬éƒ½ä½¿ç”¨ç›¸åŒçš„è¿ç®—ç¬¦ `...`ï¼Œ[å±•å¼€è¯­æ³• (Spread syntax)](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)ï¼Œå¯ä»¥åœ¨å‡½æ•°è°ƒç”¨/æ•°ç»„æ„é€ æ—¶ï¼Œå°†æ•°ç»„è¡¨è¾¾å¼æˆ–è€… string åœ¨è¯­æ³•å±‚é¢å±•å¼€ï¼›è¿˜å¯ä»¥åœ¨æ„é€ å­—é¢é‡å¯¹è±¡æ—¶ï¼Œå°†å¯¹è±¡è¡¨è¾¾å¼æŒ‰ `key-value` çš„æ–¹å¼å±•å¼€ã€‚[å‰©ä½™å‚æ•°ï¼ˆRest parametersï¼‰](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/rest_parameters)è¯­æ³•å…è®¸æˆ‘ä»¬å°†ä¸€ä¸ªä¸å®šæ•°é‡çš„å‚æ•°è¡¨ç¤ºä¸ºä¸€ä¸ªæ•°ç»„ã€‚

```js
function add(a, b) {
    return a + b
}

const nums = [5, 6]
const sum = add(...nums)
console.log(sum) // 11
function add(...rest) {
    return rest.reduce((total, current) => total + current)
}

console.log(add(1, 2)) // logs 3
console.log(add(1, 2, 3, 4, 5)) // logs 15
const [first, ...others] = [1, 2, 3, 4, 5]
console.log(first) // 1
console.log(others) // [2,3,4,5]

const parts = ['shoulders', 'knees'];
const lyrics = ['head', ...parts, 'and', 'toes']
console.log(lyrics) // ['head', 'shoulders', 'knees', 'and', 'toes']
```

## 53. ä»€ä¹ˆæ˜¯é»˜è®¤å‚æ•°ï¼Ÿ

åœ¨ ES6 ä¸­å£°æ˜å‡½æ•°æ—¶å¯ä»¥ç»™å‚æ•°æ·»åŠ é»˜è®¤å€¼ã€‚

```js
// ES5
// function add(a, b) {
//   a = a || 0
//   b = b || 0
//   return a + b
// }

// ES6
function add(a = 0, b = 0) {
  return a + b
}
```

æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºé»˜è®¤å‚æ•°ä½¿ç”¨è§£æ„ï¼š

```js
function getFirst([first, ...rest] = [0, 1]) {
    return first
}

getFirst() // 0
getFirst([10, 20, 30]) // 10

function getArr({ nums } = { nums: [1, 2, 3, 4] }) {
    return nums
}

getArr() // [1, 2, 3, 4]
getArr({ nums: [5, 4, 3, 2, 1] }) // [5,4,3,2,1]
```

æˆ‘ä»¬è¿˜å¯ä»¥å°†å…ˆå®šä¹‰çš„å‚æ•°ç”¨äºåå®šä¹‰çš„å‚æ•°ï¼š

```js
function doSomethingWithValue(value = 'Hello World', callback = () => { console.log(value) }) {
    callback()
}
doSomethingWithValue() // "Hello World"
```

## 54. ä»€ä¹ˆæ˜¯åŒ…è£…å¯¹è±¡ï¼Ÿ

é™¤äº† `null` å’Œ `undefined`ï¼Œåƒ `string`ï¼Œ`number` å’Œ `boolean` ç­‰è¿™äº›åŸå§‹æ•°æ®ç±»å‹ï¼Œå®ƒä»¬è™½ç„¶ä¸æ˜¯ `object` ä½†ä¹Ÿéƒ½æœ‰è‡ªå·±çš„å±æ€§å’Œæ–¹æ³•ã€‚

```js
let name = 'marko'

console.log(typeof name) //  "string"
console.log(name.toUpperCase()) //  "MARKO"
```

åŸå› æ˜¯å®ƒè¢«ä¸´æ—¶çš„è½¬ä¸ºäº†ä¸€ä¸ªå¯¹è±¡ï¼Œé™¤äº† `null` å’Œ `undefined` æ‰€æœ‰åŸå§‹ç±»å‹éƒ½æœ‰è‡ªå·±çš„åŒ…è£…å¯¹è±¡ï¼Œåˆ›å»ºçš„æ–°å¯¹è±¡åœ¨æˆ‘ä»¬å®Œæˆå±æ€§è®¿é—®æˆ–æ–¹æ³•è°ƒç”¨åä¼šè¢«ç«‹å³æ¸…é™¤ã€‚

å®ƒå®é™…å·¥ä½œæ—¶å¤§æ¦‚æ˜¯è¿™æ ·ï¼š

```js
console.log(new String(name).toUpperCase())
```

## 55. éšå¼è½¬æ¢å’Œæ˜¾å¼è½¬æ¢æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

éšå¼è½¬æ¢æ˜¯æŒ‡æ— éœ€æˆ‘ä»¬æ‰‹åŠ¨ç¼–ç ï¼Œåœ¨æ‰§è¡ŒæŸäº›æ“ä½œæ—¶å€¼è‡ªåŠ¨è½¬ä¸ºåˆ«çš„ç±»å‹ã€‚

```js
console.log(1 + '6') // 16
console.log(false + true) // 1
console.log(6 * '2') // 12
```

æ˜¾ç¤ºè½¬æ¢æ˜¯æŒ‡æˆ‘ä»¬æ‰‹åŠ¨å°†å€¼è½¬æ¢ä¸ºæˆ‘ä»¬æƒ³è¦çš„ç±»å‹ï¼š

```js
console.log(1 + Number('6')) // 7
```

## 56. `NaN` æ˜¯ä»€ä¹ˆï¼Ÿæ€ä¹ˆåˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯ä¸æ˜¯ `NaN`ï¼Ÿ

`NaN`ï¼ˆNot a Numberï¼‰è¡¨ç¤ºéæ•°å­—ã€‚

```js
console.log(Number({})) // NaN
```

JS æœ‰ä¸€ä¸ªå†…ç½®æ–¹æ³• `isNaN`ï¼Œç”¨äºåˆ¤æ–­å€¼æ˜¯å¦ä¸º `NaN`ã€‚ä½†æ˜¯è¿™ä¸ªæ–¹æ³•æœ‰ä¸€äº›å¥‡æ€ªçš„è¡Œä¸ºï¼š

```js
console.log(isNaN()) // true
console.log(isNaN(undefined)) // true
console.log(isNaN({})) // true
console.log(isNaN(String('a'))) // true
console.log(isNaN(() => {})) // true
```

å¯ä»¥çœ‹åˆ°å³ä½¿ç»™å‡ºçš„å€¼ä¸æ˜¯ `NaN` ä¹Ÿä¼šè¿”å› `true`ï¼Œæ‰€ä»¥è¿™é‡Œå»ºè®®ä½¿ç”¨ `Number.isNaN`ï¼š

```js
console.log(Number.isNaN(Number.NaN)) // true
console.log(Number.isNaN()) // false
console.log(Number.isNaN(undefined)) // false
console.log(Number.isNaN({})) // false
console.log(Number.isNaN(String('a'))) // false
console.log(Number.isNaN(() => {})) // false
```

å› ä¸ºåœ¨ JS ä¸­ `NaN` æ˜¯å”¯ä¸€ä¸€ä¸ªä¸ç­‰äºè‡ªèº«çš„å€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢è¿™ä¸ªæ–¹æ³•åˆ¤æ–­ï¼š

```js
function checkIfNaN(value) {
    return value !== value
}
```

## 57. æ€ä¹ˆåˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯ä¸æ˜¯æ•°ç»„ï¼Ÿ

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `Array.isArray()` æ¥åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯ä¸æ˜¯æ•°ç»„ï¼Œå®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼è¡¨ç¤ºç›®æ ‡å€¼æ˜¯å¦æ•°ç»„ã€‚

```js
console.log(Array.isArray(5)) // false
console.log(Array.isArray('')) // false
console.log(Array.isArray()) // false
console.log(Array.isArray(null)) // false
console.log(Array.isArray({ length: 5 })) // false

console.log(Array.isArray([])) // true
console.log(Array.prototype) // true  é²œä¸ºäººçŸ¥çš„äº‹ Array.prototype ä¹Ÿæ˜¯æ•°ç»„
```

## 58. æ€ä¹ˆä¸ä½¿ç”¨ `%` åˆ¤æ–­ä¸€ä¸ªæ•°å€¼æ˜¯å¦å¶æ•°ï¼Ÿ

å¯ä»¥ä½¿ç”¨**æŒ‰ä½ä¸**ï¼ˆ`&`ï¼‰è¿ç®—ç¬¦ï¼Œå®ƒåœ¨ä¸¤ä¸ªæ“ä½œæ•°å¯¹åº”çš„äºŒè¿›ä½éƒ½ä¸º1æ—¶ï¼Œè¯¥ä½çš„ç»“æœæ‰ä¸º1ã€‚

```js
const a = 5 // 00000000000000000000000000000101
const b = 4 // 00000000000000000000000000000100
const c = 1 // 00000000000000000000000000000011
// a & c       00000000000000000000000000000001
// b & c       00000000000000000000000000000000
console.log(a & c) // 1
console.log(b & c) // 0
```

æ‰€ä»¥æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ `&` æ¥åˆ¤æ–­ï¼š

```js
function isEven(num) {
    if (num & 1) {
        return false
    }
    return true
}
console.log(isEven(3)) // false
console.log(isEven(8)) // true
console.log(isEven(0)) // true
```

å¦‚æœè¿™ä¸ªæ–¹æ³•éš¾ä»¥ç†è§£ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸€ä¸ªé€’å½’å‡½æ•°æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

```js
function isEven(num) {
    if (num < 0 || num === 1) return false
    if (num == 0) return true
    return isEven(num - 2)
}
console.log(isEven(3)) // false
console.log(isEven(8)) // true
console.log(isEven(0)) // true
```

## 59. å¦‚ä½•åˆ¤æ–­å¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªå±æ€§ï¼Ÿ

- ä½¿ç”¨ `in` è¿ç®—ç¬¦ï¼Œè¯­æ³•ä¸º `propName in obj` å¦‚æœå¯¹è±¡ä¸­å­˜åœ¨è¿”å› `true`ï¼Œå¦åˆ™è¿”å› `false`ï¼›

  ```js
  const obj = {
      prop: 'bwahahah',
      prop2: 'hweasa'
  }
  
  console.log('prop' in obj) // true
  console.log('prop1' in obj) // false
  ```

- ä½¿ç”¨å¯¹è±¡çš„ `hasOwnProperty` æ–¹æ³•ï¼Œå®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºå¯¹è±¡ä¸­æ˜¯å¦å­˜åœ¨æŸä¸ªå±æ€§ï¼›

  ```js
  console.log(obj.hasOwnProperty('prop2')) // true
  console.log(obj.hasOwnProperty('prop1')) // false
  ```

- ä½¿ç”¨ `obj[propName]`ï¼Œå¦‚æœå¯¹è±¡ä¸­ä¸å­˜åœ¨è¯¥å±æ€§ä¼šè¿”å› `undefined`ï¼›

  ```js
  console.log(o['prop']) // true
  console.log(o['prop1']) // false
  ```

## 60. Ajax æ˜¯ä»€ä¹ˆï¼Ÿ

Ajaxï¼ˆAsynchronous JavaScript and XMLï¼‰æ˜¯ä¸€ç»„ç”¨äºå¼‚æ­¥æ˜¾ç¤ºæ•°æ®çš„ç›¸å…³æŠ€æœ¯ï¼Œå½“ä½¿ç”¨ç»“åˆäº†è¿™äº›æŠ€æœ¯çš„ Ajax æ¨¡å‹ä»¥åï¼Œç½‘é¡µåº”ç”¨èƒ½å¤Ÿå¿«é€Ÿåœ°å°†å¢é‡æ›´æ–°å‘ˆç°åœ¨ç”¨æˆ·ç•Œé¢ä¸Šï¼Œè€Œä¸éœ€è¦é‡è½½ï¼ˆåˆ·æ–°ï¼‰æ•´ä¸ªé¡µé¢ã€‚

> å°½ç®¡ X åœ¨ Ajax ä¸­ä»£è¡¨ XMLï¼Œä½†ç”±äº JSON çš„è®¸å¤šä¼˜åŠ¿ï¼Œæ¯”å¦‚æ›´åŠ è½»é‡ä»¥åŠä½œä¸º Javascript çš„ä¸€éƒ¨åˆ†ï¼Œç›®å‰ JSON çš„ä½¿ç”¨æ¯” XML æ›´åŠ æ™®éã€‚

## 61. åˆ›å»ºå¯¹è±¡çš„å‡ ç§æ–¹å¼ï¼Ÿ

- ä½¿ç”¨å¯¹è±¡å­—é¢é‡ï¼š

  ```js
  const o = {
      name: 'Mark',
      greeting() {
          return `Hi, I'm ${this.name}`
      }
  }
  
  console.log(o.greeting()) // Hi, I'm Mark
  ```

- ä½¿ç”¨æ„é€ å‡½æ•°ï¼š

  ```js
  function Person(name) {
      this.name = name
  }
  
  Person.prototype.greeting = function () {
      return `Hi, I'm ${this.name}`
  }
  
  const mark = new Person('Mark')
  
  console.log(mark.greeting()) // Hi, I'm Mark
  ```

- ä½¿ç”¨ `Object.create()` æ–¹æ³•ï¼š

  ```js
  const n = {
      greeting() {
          return `Hi, I'm ${this.name}`
      }
  }
  
  const o = Object.create(n)
  
  o.name = 'Mark'
  
  console.log(o.greeting()) // Hi, I'm Mark
  ```

## 62. `Object.seal` å’Œ `Object.freeze` æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

- **`Object.seal()`** æ–¹æ³•å°é—­ä¸€ä¸ªå¯¹è±¡ï¼Œé˜»æ­¢æ·»åŠ æ–°å±æ€§å¹¶å°†æ‰€æœ‰ç°æœ‰å±æ€§æ ‡è®°ä¸ºä¸å¯é…ç½®ï¼Œå±æ€§å€¼å¦‚æœåŸæ¥æ˜¯å¯å†™çš„å°±å¯ä»¥æ”¹å˜ã€‚
- **`Object.freeze()`** æ–¹æ³•å†»ç»“ä¸€ä¸ªå¯¹è±¡ã€‚ä¸€ä¸ªè¢«å†»ç»“çš„å¯¹è±¡å†ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹ï¼›å†»ç»“äº†ä¸€ä¸ªå¯¹è±¡åˆ™ä¸èƒ½å‘è¿™ä¸ªå¯¹è±¡æ·»åŠ æ–°çš„å±æ€§ï¼Œä¸èƒ½åˆ é™¤å·²æœ‰å±æ€§ï¼Œä¸èƒ½ä¿®æ”¹è¯¥å¯¹è±¡å·²æœ‰å±æ€§çš„å¯æšä¸¾æ€§ã€å¯é…ç½®æ€§ã€å¯å†™æ€§ï¼Œä»¥åŠä¸èƒ½ä¿®æ”¹å·²æœ‰å±æ€§çš„å€¼ã€‚æ­¤å¤–ï¼Œå†»ç»“ä¸€ä¸ªå¯¹è±¡åè¯¥å¯¹è±¡çš„åŸå‹ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹ã€‚

## 63. ä½¿ç”¨ `in` è¿ç®—ç¬¦å’Œ `hasOwnProperty` æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

å®ƒä»¬éƒ½èƒ½ç”¨æ¥éªŒè¯å¯¹è±¡æ˜¯å¦å­˜åœ¨æŸä¸ªå±æ€§ï¼Œå®ƒä»¬çš„åŒºåˆ«åœ¨äº `in` è¿ç®—ç¬¦ä¼šåœ¨å¯¹è±¡è‡ªèº«æ‰¾ä¸åˆ°å¯¹åº”å±æ€§æ—¶ç»§ç»­æŸ¥æ‰¾å®ƒçš„åŸå‹é“¾ï¼Œè€Œ  `hasOwnProperty` åªåœ¨å¯¹è±¡è‡ªèº«æŸ¥æ‰¾ã€‚

```js
const obj = {
    name: 'zxx'
}

console.log('name' in obj) // true
console.log('toString' in obj) // true

console.log(obj.hasOwnProperty('name')) // true
console.log(obj.hasOwnProperty('toString')) // false
```

## 64. JS ä¸­å¤„ç†å¼‚æ­¥ä»£ç æœ‰å“ªäº›æ–¹æ³•ï¼Ÿ

- [å›è°ƒå‡½æ•°](#ä»€ä¹ˆæ˜¯å›è°ƒå‡½æ•°ï¼Ÿ)ï¼›
- [Promise](#ä»€ä¹ˆæ˜¯-Promiseï¼Ÿ)ï¼›
- [async / await](#async-await-æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆç”¨ï¼Ÿ);

## 65. å‡½æ•°è¡¨è¾¾å¼å’Œå‡½æ•°å£°æ˜æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ

å…ˆçœ‹ä¸€ä¸ªç¤ºä¾‹ï¼š

```js
hoistedFunc() // I am hoisted
notHoistedFunc() // Uncaught TypeError: notHoistedFunc is not a function

function hoistedFunc() {
    console.log('I am hoisted')
}

var notHoistedFunc = function () {
    console.log('I will not be hoisted!')
}
```

å¯ä»¥çœ‹å‡º å‡½æ•°å£°æ˜ ä¼šå°†æ•´ä¸ªå‡½æ•°æå‡ï¼Œè€Œå‡½æ•°è¡¨è¾¾å¼ç›¸å½“äºæŠŠå‡½æ•°èµ‹ç»™äº†ä¸€ä¸ªå˜é‡ï¼Œåªä¼šå¯¹[å˜é‡çš„å£°æ˜æå‡](#ä»€ä¹ˆæ˜¯å˜é‡æå‡ï¼Ÿ)ã€‚

## 66. å‡½æ•°æœ‰å‡ ç§è°ƒç”¨çš„æ–¹å¼ï¼Ÿ

JS ä¸­æœ‰4ç§æ–¹æ³•å¯ä»¥è°ƒç”¨å‡½æ•°ï¼Œè°ƒç”¨æ–¹å¼å†³å®šäº†å‡½æ•° `this` æˆ–å‡½æ•°æ‰€æœ‰è€…å¯¹è±¡çš„å€¼ï¼›

- ä½œä¸ºå‡½æ•°è°ƒç”¨ - å¦‚æœå‡½æ•°ä¸æ˜¯ä½œä¸ºæ–¹æ³•ã€æ„é€ å‡½æ•°æˆ–ä½¿ç”¨ `apply`ï¼Œ`call` æ–¹æ³•è°ƒç”¨çš„ï¼Œé‚£ä¹ˆå®ƒå°†ä½œä¸ºå‡½æ•°è°ƒç”¨ã€‚æ­¤å‡½æ•°çš„æ‰€æœ‰è€…å¯¹è±¡å°†æ˜¯ `window` å¯¹è±¡ã€‚

  ```js
  function add(a, b) {
      console.log(this)
      return a + b
  }
  
  add(1, 5) // window  è¿”å› 6
  
  const o = {
      method(callback) {
          callback()
      }
  }
  
  o.method(function () {
      console.log(this) // window
  })
  ```

- ä½œä¸ºæ–¹æ³•çš„è°ƒç”¨ - å¦‚æœå¯¹è±¡çš„å±æ€§å…·æœ‰å‡½æ•°å€¼ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸ºæ–¹æ³•ã€‚å½“è°ƒç”¨è¯¥æ–¹æ³•æ—¶ï¼Œè¯¥æ–¹æ³•çš„ `this` å€¼å°†æ˜¯è¯¥å¯¹è±¡ã€‚

  ```js
  const details = {
      name: 'Marko',
      getName() {
          return this.name
      }
  }
  
  details.getName() // Marko
  ```

- ä½œä¸ºæ„é€ å‡½æ•°è°ƒç”¨ - å¦‚æœä¸€ä¸ªå‡½æ•°åœ¨å®ƒä¹‹å‰ä½¿ç”¨ `new` å…³é”®å­—è°ƒç”¨ï¼Œé‚£ä¹ˆå®ƒè¢«ç§°ä¸ºå‡½æ•°æ„é€ å‡½æ•°ã€‚å°†åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼Œthis å°†æŒ‡å‘è¯¥å¯¹è±¡ã€‚

  ```js
  function Employee(name, position, yearHired) {
      // åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ {}
      // æŠŠ this æŒ‡å‘è¿™ä¸ªç©ºå¯¹è±¡
      // this => {}
      this.name = name
      this.position = position
      this.yearHired = yearHired
      // ç»§æ‰¿è‡ª Employee.prototype
      // å¦‚æœæ²¡æœ‰æŒ‡å®šæ˜¾å¼çš„è¿”å›å€¼  åˆ™éšå¼è¿”å› this
  }
  
  const emp = new Employee('Marko Polo', 'Software Developer', 2017)
  ```

- ä½¿ç”¨ `apply` æˆ– `call` æ–¹æ³•è°ƒç”¨ - å¦‚æœæˆ‘ä»¬æƒ³æ˜ç¡®æŒ‡å®šå‡½æ•°çš„ `this` å€¼æˆ–æ‰€æœ‰è€…å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™äº›æ–¹æ³•è°ƒç”¨å‡½æ•°ã€‚

  ```js
  const obj1 = {
      result: 0
  }
  
  const obj2 = {
      result: 0
  }
  
  function reduceAdd() {
      let result = 0
      for (let i = 0, len = arguments.length; i < len; i++) {
          result += arguments[i]
      }
      this.result = result
  }
  
  reduceAdd.apply(obj1, [1, 2, 3, 4, 5]) // reduceAdd æ‰§è¡Œæ—¶å‡½æ•°å†… this æŒ‡å‘ obj1 å¯¹è±¡
  reduceAdd.call(obj2, 1, 2, 3, 4, 5) // reduceAdd æ‰§è¡Œæ—¶å‡½æ•°å†… this æŒ‡å‘ obj2 å¯¹è±¡
  ```

## 67. ä»€ä¹ˆæ˜¯è®°å¿†åŒ–å‡½æ•°ï¼Ÿå®ƒæœ‰ä»€ä¹ˆç”¨ï¼Ÿ

è®°å¿†åŒ–ï¼ˆmemoizationï¼‰æ˜¯æ„å»ºä¸€ä¸ªå‡½æ•°çš„è¿‡ç¨‹è¯¥å‡½æ•°èƒ½å¤Ÿè®°ä½å®ƒä¹‹å‰è®¡ç®—çš„ç»“æœæˆ–å€¼ã€‚ç”¨é€”æ˜¯å¦‚æœè¯¥å‡½æ•°å·²ç»åœ¨ä¸Šæ¬¡ä½¿ç”¨ç›¸åŒå‚æ•°çš„è®¡ç®—ä¸­æ‰§è¡Œè¿‡ï¼Œæˆ‘ä»¬å°±å¯ä»¥é¿å…è¯¥å‡½æ•°çš„è®¡ç®—ã€‚è¿™èƒ½å¤ŸèŠ‚çœæ—¶é—´ï¼Œä½†ä¹Ÿä¼šæ¶ˆè€—æ›´å¤šçš„å†…å­˜æ¥ä¿å­˜ä¹‹å‰æ‰§è¡Œçš„ç»“æœã€‚

## 68. å®ç°ä¸€ä¸ªè®°å¿†åŒ–è¾…åŠ©å‡½æ•°ã€‚

```js
const slice = Array.prototype.slice
function memoize(fn) {
    const cache = {}
    return (...args) => {
        const params = slice.call(args)
        console.log(params)
        if (cache[params]) {
            console.log('cached')
            return cache[params]
        } else {
            let result = fn(...args)
            cache[params] = result
            console.log(`not cached`)
            return result
        }
    }
}
const makeFullName = (fName, lName) => `${fName} ${lName}`
const reduceAdd = (numbers, startingValue = 0) =>
numbers.reduce((total, cur) => total + cur, startingValue)

const memoizedMakeFullName = memoize(makeFullName)
const memoizedReduceAdd = memoize(reduceAdd)

memoizedMakeFullName('Marko', 'Polo')
memoizedMakeFullName('Marko', 'Polo')

memoizedReduceAdd([1, 2, 3, 4, 5], 5)
memoizedReduceAdd([1, 2, 3, 4, 5], 5)
```

## 69. ä¸ºä»€ä¹ˆ `typeof null` ä¼šè¿”å› `object`ï¼Ÿæ€ä¹ˆåˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ `null`ï¼Ÿ

ç®€å•æ¥è¯´ï¼Œ`typeof null` çš„ç»“æœä¸º `Object` æ˜¯ JS è®¾è®¡ä¹‹åˆçš„ä¸€ä¸ª `bug`ã€‚åæ¥æè®®å°† `typeof null == 'object'` æ›´æ”¹ä¸º `typeof null == 'null'` ä½†è¢«æ‹’ç»äº†ï¼Œå› ä¸ºè¿™ä¼šç»™ç°æœ‰é¡¹ç›®å’Œè½¯ä»¶å¸¦æ¥æ›´å¤šé”™è¯¯ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `===` æ¥åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦ `null`ï¼š

```js
function isNull(value) {
    return value === null
}
```

## 70. JS ä¸­çš„ `new` å…³é”®å­—æœ‰ä»€ä¹ˆç”¨ï¼Ÿ

`new` å…³é”®å­—ç”¨äºåˆ›å»ºä¸€ä¸ªç”¨æˆ·å®šä¹‰çš„å¯¹è±¡ç±»å‹çš„å®ä¾‹æˆ–å…·æœ‰æ„é€ å‡½æ•°çš„å†…ç½®å¯¹è±¡çš„å®ä¾‹ã€‚

```js
function Employee(name, position, yearHired) {
    this.name = name
    this.position = position
    this.yearHired = yearHired
}

const emp = new Employee('Marko Polo', 'Software Developer', 2017)
```

åœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ `new` å…³é”®å­—åšäº†å››ä»¶äº‹ï¼š

1. åˆ›å»ºä¸€ä¸ªç©ºå¯¹è±¡ï¼ˆ`{}`ï¼‰ï¼›
2. ä¸ºåˆ›å»ºçš„ç©ºå¯¹è±¡æ·»åŠ å±æ€§ `__proto__`ï¼Œå°†è¯¥å±æ€§é“¾æ¥è‡³æ„é€ å‡½æ•°çš„åŸå‹å¯¹è±¡ï¼›
3. å°†æ­¥éª¤1åˆ›å»ºçš„å¯¹è±¡ä½œä¸º `this` çš„ä¸Šä¸‹æ–‡ï¼›
4. å¦‚æœè¯¥å‡½æ•°æ²¡æœ‰æŒ‡å®šè¿”å›å€¼ï¼Œåˆ™è¿”å› `this`ã€‚

å½“ä»£ç  `new Employee()` æ‰§è¡Œæ—¶ï¼Œä¼šå‘ç”Ÿä¸€ä¸‹å‡ ä»¶äº‹ï¼š

1. ä¸€ä¸ªç»§æ‰¿è‡ª `Employee.prototype` çš„æ–°å¯¹è±¡è¢«åˆ›å»ºã€‚
2. ä½¿ç”¨æŒ‡å®šçš„å‚æ•°è°ƒç”¨æ„é€ å‡½æ•° `Employee`ï¼Œå¹¶å°† `this` ç»‘å®šåˆ°æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚`new Employee` ç­‰åŒäº `new Employee()`ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰æŒ‡å®šå‚æ•°åˆ—è¡¨ï¼Œ`Employee` ä¸å¸¦ä»»ä½•å‚æ•°è°ƒç”¨çš„æƒ…å†µã€‚
3. ç”±æ„é€ å‡½æ•°è¿”å›çš„å¯¹è±¡å°±æ˜¯ `new` è¡¨è¾¾å¼çš„ç»“æœã€‚å¦‚æœæ„é€ å‡½æ•°æ²¡æœ‰æ˜¾å¼è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œåˆ™ä½¿ç”¨æ­¥éª¤ 1 åˆ›å»ºçš„å¯¹è±¡ã€‚



> **é“¾æ¥** ğŸ”—
> [70 JavaScript Interview Questions](https://dev.to/macmacky/70-javascript-interview-questions-5gfi#56-what-is-nan-and-how-to-check-if-a-value-is-nan)
> [MDN](https://developer.mozilla.org/)
> [Javascript æ•™ç¨‹ - ç½‘é“](https://wangdoc.com/javascript/)
